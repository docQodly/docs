"use strict";(self.webpackChunkqodly=self.webpackChunkqodly||[]).push([[1252],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>k});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),m=s(n),c=r,k=m["".concat(p,".").concat(c)]||m[c]||u[c]||i;return n?a.createElement(k,l(l({ref:t},d),{},{components:n})):a.createElement(k,l({ref:t},d))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=c;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o[m]="string"==typeof e?e:r,l[1]=o;for(var s=2;s<i;s++)l[s]=n[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},32239:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>s});var a=n(87462),r=(n(67294),n(3905));const i={id:"$method",title:"$method"},l=void 0,o={unversionedId:"api/$method",id:"api/$method",title:"$method",description:"Functionality",source:"@site/docs/api/$method.md",sourceDirName:"api",slug:"/api/$method",permalink:"/docs/api/$method",draft:!1,editUrl:"https://github.com/docQodly/docs/edit/main/docs/api/$method.md",tags:[],version:"current",frontMatter:{id:"$method",title:"$method"},sidebar:"API",previous:{title:"$lock",permalink:"/docs/api/$lock"},next:{title:"$orderby",permalink:"/docs/api/$orderby"}},p={},s=[{value:"Functionality",id:"functionality",level:2},{value:"Definition",id:"definition",level:3},{value:"Available Syntaxes",id:"available-syntaxes",level:3},{value:"$method=delete",id:"methoddelete",level:2},{value:"Description",id:"description",level:3},{value:"Examples",id:"examples",level:3},{value:"Response",id:"response",level:3},{value:"$method=entityset",id:"methodentityset",level:2},{value:"Description",id:"description-1",level:3},{value:"Examples",id:"examples-1",level:3},{value:"Response",id:"response-1",level:3},{value:"$method=release",id:"methodrelease",level:2},{value:"Description",id:"description-2",level:3},{value:"Example",id:"example",level:3},{value:"Response",id:"response-2",level:3},{value:"$method=subentityset",id:"methodsubentityset",level:2},{value:"Description",id:"description-3",level:3},{value:"Example",id:"example-1",level:3},{value:"Response",id:"response-3",level:3},{value:"$method=update",id:"methodupdate",level:2},{value:"Description",id:"description-4",level:3},{value:"Examples",id:"examples-2",level:3},{value:"Response",id:"response-4",level:3},{value:"Best Practices",id:"best-practices",level:2}],d={toc:s};function m(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"functionality"},"Functionality"),(0,r.kt)("h3",{id:"definition"},"Definition"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"$method")," parameter allows you to define the operation to execute on the returned entity or entity selection. This includes actions such as deleting entities, creating entity sets, releasing entity sets, creating sub-entity sets, and updating entities."),(0,r.kt)("h3",{id:"available-syntaxes"},"Available Syntaxes"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Syntax"),(0,r.kt)("th",{parentName:"tr",align:null},"Example"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#methoddelete"},(0,r.kt)("strong",{parentName:"a"},"$method=delete"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"POST {{ApiEndpoint}}/Employee(11)?$method=delete")),(0,r.kt)("td",{parentName:"tr",align:null},"Deletes the current entity, entity collection, or entity selection.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#methodentityset"},(0,r.kt)("strong",{parentName:"a"},"$method=entityset"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"GET {{ApiEndpoint}}/Employee(11)?$method=entityset&$timeout=600")),(0,r.kt)("td",{parentName:"tr",align:null},"Creates an entity set in the server's cache based on the collection of entities defined in the REST request")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#methodrelease"},(0,r.kt)("strong",{parentName:"a"},"$method=release"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"GET {{ApiEndpoint}}/Employee/$entityset/<entitySetID>?$method=release")),(0,r.kt)("td",{parentName:"tr",align:null},"Releases an existing entity set stored in the server's cache")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#methodsubentityset"},(0,r.kt)("strong",{parentName:"a"},"$method=subentityset"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"GET {{ApiEndpoint}}/Employee(11)/staff?$expand=staff&$method=subentityset&$subOrderby=lastName ASC")),(0,r.kt)("td",{parentName:"tr",align:null},"Creates an entity set based on the collection of related entities defined in the REST request")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#methodupdate"},(0,r.kt)("strong",{parentName:"a"},"$method=update"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"POST {{ApiEndpoint}}/Employee?$method=update")),(0,r.kt)("td",{parentName:"tr",align:null},"Updates and/or creates one or more entities")))),(0,r.kt)("h2",{id:"methoddelete"},"$method=delete"),(0,r.kt)("h3",{id:"description"},"Description"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"$method=delete")," parameter allows you to delete an entity or an entire entity collection. "),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"You can define the collection of entities using ",(0,r.kt)("inlineCode",{parentName:"p"},"$filter")," or specify one directly using ",(0,r.kt)("inlineCode",{parentName:"p"},"{dataClass}({key})")," (e.g., ",(0,r.kt)("inlineCode",{parentName:"p"},"/Employee(22)"),"). ")),(0,r.kt)("p",null,"You can also delete entities in an entity set by calling ",(0,r.kt)("inlineCode",{parentName:"p"},"$entityset/{entitySetID}"),"."),(0,r.kt)("h3",{id:"examples"},"Examples"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Delete a specific entity:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"POST {{ApiEndpoint}}/rest/Employee(22)?$method=delete\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Delete entities using a filter:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'POST {{ApiEndpoint}}/rest/Employee?$filter="ID=11"&$method=delete\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Delete an entity set:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"POST {{ApiEndpoint}}/rest/Employee/$entityset/<entitySetID>?$method=delete\n")))),(0,r.kt)("h3",{id:"response"},"Response"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "ok": true\n}\n')),(0,r.kt)("h2",{id:"methodentityset"},"$method=entityset"),(0,r.kt)("h3",{id:"description-1"},"Description"),(0,r.kt)("p",null,"When you create a collection of entities in REST, you can save this collection as an entity set in the server's cache. "),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"The entity set will have a reference number that you can use to access it later. By default, it is valid for two hours, but you can modify this duration by setting the ",(0,r.kt)("inlineCode",{parentName:"p"},"$timeout")," parameter.")),(0,r.kt)("h3",{id:"examples-1"},"Examples"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Create an entity set with the default timeout:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'GET {{ApiEndpoint}}/rest/Employee?$filter="ID>320"&$method=entityset\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Create an entity set with a custom timeout:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'GET {{ApiEndpoint}}/rest/Employee?$filter="ID>320"&$method=entityset&$timeout=600\n')))),(0,r.kt)("h3",{id:"response-1"},"Response"),(0,r.kt)("p",null,"After creating an entity set, the first element, ",(0,r.kt)("inlineCode",{parentName:"p"},"__ENTITYSET"),", is added to the object returned and indicates the URI to use to access the entity set:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "__ENTITYSET": "/rest/Employee/$entityset/207BE8235EC24623B98082CAA84CCB7C",\n    ...\n}\n')),(0,r.kt)("h2",{id:"methodrelease"},"$method=release"),(0,r.kt)("h3",{id:"description-2"},"Description"),(0,r.kt)("p",null,"You can release an entity set, which you created using ",(0,r.kt)("inlineCode",{parentName:"p"},"$method=entityset"),", from the server's cache."),(0,r.kt)("h3",{id:"example"},"Example"),(0,r.kt)("p",null,"Release an existing entity set:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"GET {{ApiEndpoint}}/rest/Employee/$entityset/4C51204DD8184B65AC7D79F09A077F24?$method=release\n")),(0,r.kt)("h3",{id:"response-2"},"Response"),(0,r.kt)("p",null,"If the request was successful:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "ok": true\n}\n')),(0,r.kt)("p",null,"If the entity set wasn't found:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "__ERROR": [\n        {\n            "message": "The \\"207BE8235EC24623B982CAA84CCB7C\\" entity set cannot be found",\n            "componentSignature": "dbmg",\n            "errCode": 1802\n        }\n    ]\n}\n')),(0,r.kt)("h2",{id:"methodsubentityset"},"$method=subentityset"),(0,r.kt)("p",null,"Creates an entity set in the server's cache based on the collection of related entities defined in the REST request."),(0,r.kt)("h3",{id:"description-3"},"Description"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"$method=subentityset")," parameter allows you to sort the data returned by the relation attribute defined in the REST request. "),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"You can sort the data using the ",(0,r.kt)("inlineCode",{parentName:"p"},"$subOrderby")," property. By default, the data is sorted in ascending order.")),(0,r.kt)("h3",{id:"example-1"},"Example"),(0,r.kt)("p",null,"Retrieve only the related entities for a specific entity:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"GET {{ApiEndpoint}}/rest/Users(4)/Orders?$expand=Orders&$method=subentityset\n")),(0,r.kt)("h3",{id:"response-3"},"Response"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "__ENTITYSET": "/rest/Orders/$entityset/6F245BB22D294281B9D394B876D4A6EE",\n    "__DATACLASS": "Orders",\n    "__entityModel": "Orders",\n    "__GlobalStamp": 0,\n    "__COUNT": 1,\n    "__FIRST": 0,\n    "__ENTITIES": [\n        {\n            "__KEY": "10",\n            "__TIMESTAMP": "2024-05-09T17:01:36.990Z",\n            "__STAMP": 1,\n            "ID": 10,\n            "Quantity": 2,\n            "Purchaser": {\n                "__deferred": {\n                    "uri": "/rest/Users[4]",\n                    "__KEY": "4"\n                }\n            },\n            "OrderedProduct": {\n                "__deferred": {\n                    "uri": "/rest/Products[1]",\n                    "__KEY": "1"\n                }\n            },\n            "paymentsSelection": {\n                "__deferred": {\n                    "uri": "/rest/Orders[10]/paymentsSelection?$expand=paymentsSelection"\n                }\n            }\n        }\n    ],\n    "__SENT": 1\n}\n')),(0,r.kt)("h2",{id:"methodupdate"},"$method=update"),(0,r.kt)("h3",{id:"description-4"},"Description"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"$method=update")," parameter allows you to update and/or create one or more entities in a single ",(0,r.kt)("strong",{parentName:"p"},"POST")," request. "),(0,r.kt)("admonition",{type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"If updating an entity, you must include the ",(0,r.kt)("inlineCode",{parentName:"p"},"__KEY")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"__STAMP")," parameters. If these parameters are missing, a new entity will be created.")),(0,r.kt)("h3",{id:"examples-2"},"Examples"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Update a specific entity:"),(0,r.kt)("p",{parentName:"li"},"  ",(0,r.kt)("strong",{parentName:"p"},"Request URL:")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"POST {{ApiEndpoint}}/rest/Person?$method=update\n")),(0,r.kt)("p",{parentName:"li"},"  ",(0,r.kt)("strong",{parentName:"p"},"POST Data:")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "__KEY": "340",\n    "firstName": "Pete",\n    "lastName": "Miller"\n}\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Create a new entity:"),(0,r.kt)("p",{parentName:"li"},"  ",(0,r.kt)("strong",{parentName:"p"},"Request URL:")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"POST {{ApiEndpoint}}/rest/Person?$method=update\n")),(0,r.kt)("p",{parentName:"li"},"  ",(0,r.kt)("strong",{parentName:"p"},"POST Data:")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "firstName": "John",\n    "lastName": "Smith"\n}\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Update and create multiple entities at the same time:"),(0,r.kt)("p",{parentName:"li"},"  ",(0,r.kt)("strong",{parentName:"p"},"Request URL:")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"POST {{ApiEndpoint}}/rest/Person?$method=update\n")),(0,r.kt)("p",{parentName:"li"},"  ",(0,r.kt)("strong",{parentName:"p"},"POST Data:")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-json"},'[\n    {\n        "__KEY": "309",\n        "firstName": "Penelope",\n        "lastName": "Miller"\n    },\n    {\n        "firstName": "Ann",\n        "lastName": "Jones"\n    }\n]\n')))),(0,r.kt)("h3",{id:"response-4"},"Response"),(0,r.kt)("p",null,"When adding or modifying an entity, the server returns the updated entity with the attributes that were modified:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "__STATUS": {\n        "success": true\n    },\n    "__KEY": "622", \n    "__STAMP": 1, \n    "uri": "/rest/Employee(622)", \n    "__TIMESTAMP": "!!2024-05-23!!",\n    "ID": 622, \n    "firstName": "John", \n    "lastName": "Smith"\n}\n')),(0,r.kt)("p",null,"If there is an error, such as an incorrect key:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "__ERROR": [\n        {\n            "message": "Error code: 1542 (dbmg)\\nCannot find entity with \\"98712764\\" key in the \\"Employee\\" dataclass\\nDatabase Engine\\nDatabase Engine\\ntask 87, name: \'REST Handler: \'\\n",\n            "componentSignature": "dbmg",\n            "errCode": 1542\n        }\n    ]\n}\n')),(0,r.kt)("h2",{id:"best-practices"},"Best Practices"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Use the Appropriate Method:")," Choose the correct method (",(0,r.kt)("inlineCode",{parentName:"p"},"delete"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"entityset"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"release"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"subentityset"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"update"),") based on the operation you need to perform.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Check Responses:")," Always check the response to ensure that the operation was successful and handle any errors gracefully.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Manage Timeouts:")," When creating entity sets, manage timeouts appropriately to avoid unintended data retention or loss."))))}m.isMDXComponent=!0}}]);