"use strict";(self.webpackChunkqodly=self.webpackChunkqodly||[]).push([[2756],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>u});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=a.createContext({}),c=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=c(e.components);return a.createElement(i.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},b=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,i=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),d=c(n),b=o,u=d["".concat(i,".").concat(b)]||d[b]||m[b]||r;return n?a.createElement(u,l(l({ref:t},s),{},{components:n})):a.createElement(u,l({ref:t},s))}));function u(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,l=new Array(r);l[0]=b;var p={};for(var i in t)hasOwnProperty.call(t,i)&&(p[i]=t[i]);p.originalType=e,p[d]="string"==typeof e?e:o,l[1]=p;for(var c=2;c<r;c++)l[c]=n[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}b.displayName="MDXCreateElement"},84421:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>d,frontMatter:()=>r,metadata:()=>p,toc:()=>c});var a=n(87462),o=(n(67294),n(3905));const r={id:"objectCopy",title:"objectCopy"},l=void 0,p={unversionedId:"language/commands/objectCopy",id:"language/commands/objectCopy",title:"objectCopy",description:"objectCopy ( object objectobjectCopy ( object integer ) object , option object ) object , option collection ) : object",source:"@site/docs/language/commands/objectCopy.md",sourceDirName:"language/commands",slug:"/language/commands/objectCopy",permalink:"/docs/language/commands/objectCopy",draft:!1,editUrl:"https://github.com/docQodly/docs/edit/main/docs/language/commands/objectCopy.md",tags:[],version:"current",frontMatter:{id:"objectCopy",title:"objectCopy"},sidebar:"Develop",previous:{title:"objectClass",permalink:"/docs/language/commands/objectClass"},next:{title:"objectEntries",permalink:"/docs/language/commands/objectEntries"}},i={},c=[{value:"Description",id:"description",level:4},{value:"Example 1",id:"example-1",level:4},{value:"Example 2",id:"example-2",level:4},{value:"Example 3",id:"example-3",level:4}],s={toc:c};function d(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"objectCopy")," ( ",(0,o.kt)("em",{parentName:"p"},"object")," : object ) : object",(0,o.kt)("br",null),(0,o.kt)("strong",{parentName:"p"},"objectCopy")," ( ",(0,o.kt)("em",{parentName:"p"},"object")," : object , ",(0,o.kt)("em",{parentName:"p"},"option")," : integer ) : object",(0,o.kt)("br",null),(0,o.kt)("strong",{parentName:"p"},"objectCopy")," ( ",(0,o.kt)("em",{parentName:"p"},"object")," : object , ",(0,o.kt)("em",{parentName:"p"},"option")," : integer , ",(0,o.kt)("em",{parentName:"p"},"groupWith")," : object ) : object",(0,o.kt)("br",null),(0,o.kt)("strong",{parentName:"p"},"objectCopy")," ( ",(0,o.kt)("em",{parentName:"p"},"object")," : object , ",(0,o.kt)("em",{parentName:"p"},"option")," : integer , ",(0,o.kt)("em",{parentName:"p"},"groupWith")," : collection ) : object"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,o.kt)("th",{parentName:"tr",align:null},"Type"),(0,o.kt)("th",{parentName:"tr",align:"center"}),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"object"),(0,o.kt)("td",{parentName:"tr",align:null},"object"),(0,o.kt)("td",{parentName:"tr",align:"center"},"->"),(0,o.kt)("td",{parentName:"tr",align:null},"Object to copy")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"option"),(0,o.kt)("td",{parentName:"tr",align:null},"integer"),(0,o.kt)("td",{parentName:"tr",align:"center"},"->"),(0,o.kt)("td",{parentName:"tr",align:null},"ck shared: return a shared object")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"groupWith"),(0,o.kt)("td",{parentName:"tr",align:null},"object"),(0,o.kt)("td",{parentName:"tr",align:"center"},"->"),(0,o.kt)("td",{parentName:"tr",align:null},"Shared object to be grouped with the resulting object")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"groupWith"),(0,o.kt)("td",{parentName:"tr",align:null},"collection"),(0,o.kt)("td",{parentName:"tr",align:"center"},"->"),(0,o.kt)("td",{parentName:"tr",align:null},"Shared collection to be grouped with the resulting object")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Result"),(0,o.kt)("td",{parentName:"tr",align:null},"object"),(0,o.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,o.kt)("td",{parentName:"tr",align:null},"Deep copy of ",(0,o.kt)("em",{parentName:"td"},"object"))))),(0,o.kt)("h4",{id:"description"},"Description"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"objectCopy")," command returns an object containing a complete (deep) copy of the properties, sub-objects and values for the ",(0,o.kt)("em",{parentName:"p"},"object"),"."),(0,o.kt)("p",null,"By default, ",(0,o.kt)("inlineCode",{parentName:"p"},"objectCopy")," returns a regular (not shared) object, even if the command is applied to a shared object. Pass the ",(0,o.kt)("inlineCode",{parentName:"p"},"ck shared")," constant in the ",(0,o.kt)("em",{parentName:"p"},"option")," parameter to create a shared object. In this case, you can use the ",(0,o.kt)("em",{parentName:"p"},"groupWith")," parameter to associate the shared object with another collection or object."),(0,o.kt)("p",null,"The ",(0,o.kt)("em",{parentName:"p"},"groupWith")," parameter allows you to designate a collection or an object with which the resulting object should be associated."),(0,o.kt)("admonition",{title:"Notes",type:"note"},(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"objectCopy")," can be used with an entity selection object. By default if ",(0,o.kt)("inlineCode",{parentName:"li"},"ck shared")," is omitted, a non-shareable entity selection is returned. If ",(0,o.kt)("inlineCode",{parentName:"li"},"ck shared")," is passed, a shareable entity selection is returned. In this context, the ",(0,o.kt)("em",{parentName:"li"},"groupWith")," option is useless since an entity selection does not have a locking identifier."),(0,o.kt)("li",{parentName:"ul"},"The same principle applies to entity selections stored inside properties of ",(0,o.kt)("em",{parentName:"li"},"object"),". However, the command is optimized when ",(0,o.kt)("inlineCode",{parentName:"li"},"ck shared")," is passed and a nested entity selection is shareable: the same entity selection reference is returned in the resulting object."),(0,o.kt)("li",{parentName:"ul"},"Datastore, dataclass, and entity objects are not copiable. If ",(0,o.kt)("inlineCode",{parentName:"li"},"objectCopy")," command is called with them, a ",(0,o.kt)("inlineCode",{parentName:"li"},"null")," value is returned"))),(0,o.kt)("h4",{id:"example-1"},"Example 1"),(0,o.kt)("p",null,"This example illustrates the deep copy of an object containing a sub-object:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-qs"},'var ob1, ob2, ob3 : object\n\nob1 = {info: {a: 20; b: 30}}  \n    //ob1: {"info":{"a":20,"b":30}}\nob2 = ob1 //another reference to the same object\n    //ob2: {"info":{"a":20,"b":30}}\nob3 = objectCopy(ob1) //deep copy of the object\n    //ob3: {"info":{"a":20,"b":30}}\n\nob1.info.b = 1000 //modify ob1 and thus ob2\nob3.info.a = 5000 //modify the deep copy\n    //ob1: {"info":{"a":20,"b":1000}}\n    //ob2: {"info":{"a":20,"b":1000}}\n    //ob3: {"info":{"a":5000,"b":30}}\n\n')),(0,o.kt)("h4",{id:"example-2"},"Example 2"),(0,o.kt)("p",null,"We want to copy the regular (non shared) ",(0,o.kt)("em",{parentName:"p"},"person")," object into the ",(0,o.kt)("em",{parentName:"p"},"sharedPerson")," shared object. To do this, we must create a shared copy of the object (",(0,o.kt)("em",{parentName:"p"},"sharedPerson"),")."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-qs"},' var person, copy, sharedPerson : object\n var text : string\n\n text = documentToString(file("/SOURCES/person.txt")\n person = jsonParse(text) //person is a standard object\n sharedPerson = newSharedObject()\n copy = objectCopy(person,ck shared) //copy is a shared object\n\n  //So it can be put in sharedPerson\n use(sharedObject)\n    sharedObject.person = copy\n end\n\n')),(0,o.kt)("h4",{id:"example-3"},"Example 3"),(0,o.kt)("p",null,"We want to copy ",(0,o.kt)("em",{parentName:"p"},"sharedObj")," in ",(0,o.kt)("em",{parentName:"p"},"sharedColl")," but since they belong to different shared groups, a direct copy would result in an error. We must make a copy of ",(0,o.kt)("em",{parentName:"p"},"sharedObj")," and designate sharedColl* as shared group for the copy."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-qs"},' var sharedObj, objCopy : object\n var sharedColl : collection\n\n  //sharedObj belongs to a shared group\n sharedObj = newSharedObject("lastname","Smith","address",newSharedObject("city","New York"))\n  //sharedColl belongs to another shared group\n sharedColl = newSharedCollection(newSharedObject("lastname","Brown"))\n\n objCopy = objectCopy(sharedObj,ck shared,sharedColl)\n  //objCopy is now in the same shared group as sharedColl\n\n  //So objCopy can be put in sharedColl without error\n use(sharedColl)\n    sharedColl.push(objCopy)\n end\n')))}d.isMDXComponent=!0}}]);