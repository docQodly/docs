"use strict";(self.webpackChunkqodly=self.webpackChunkqodly||[]).push([["1814"],{90411:function(e,n,s){s.r(n),s.d(n,{metadata:()=>r,contentTitle:()=>c,default:()=>h,assets:()=>i,toc:()=>o,frontMatter:()=>a});var r=JSON.parse('{"id":"language/FunctionClass","title":"Function","description":"A 4D.Function object contains a piece of code that can be executed from an object, either using the () operator, or using the apply() and call() functions. QodlyScript proposes three kinds of Function objects:","source":"@site/versioned_docs/version-1.0.0/language/FunctionClass.md","sourceDirName":"language","slug":"/language/FunctionClass","permalink":"/docs/language/FunctionClass","draft":false,"unlisted":false,"editUrl":"https://github.com/qodly/docs/issues/new?title=Comment%20on%20language%2FFunctionClass.md%20(1.0.0)&body=Share%20any%20feedback%20about%20this%20page%20%E2%80%94%20report%20issues%2C%20suggest%20improvements%2C%20or%20tell%20us%20what%E2%80%99s%20helpful.%0A%0AIf%20it%E2%80%99s%20an%20issue%3A%0A-%20What%E2%80%99s%20the%20issue%3F%20(e.g.%2C%20typo%2C%20incorrect%20information%2C%20unclear%20explanation)%0A-%20Where%20is%20it%3F%20(e.g.%2C%20section%20name%2C%20specific%20paragraph%2C%20or%20line)%0A%0AThank%20you%20for%20helping%20us%20improve!%20%F0%9F%9A%80%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20","tags":[],"version":"1.0.0","frontMatter":{"id":"FunctionClass","title":"Function"},"sidebar":"Develop","previous":{"title":"Folder","permalink":"/docs/language/FolderClass"},"next":{"title":"HTTPRequest","permalink":"/docs/language/HTTPRequestClass"}}'),t=s("85893"),l=s("50065");let a={id:"FunctionClass",title:"Function"},c=void 0,i={},o=[{value:"formula objects",id:"formula-objects",level:3},{value:"Passing parameters",id:"passing-parameters",level:4},{value:"Parameters to a single method",id:"parameters-to-a-single-method",level:4},{value:"Functions and properties",id:"functions-and-properties",level:3},{value:".apply()",id:"apply",level:2},{value:"Description",id:"description",level:4},{value:"Example 1",id:"example-1",level:4},{value:"Example 2",id:"example-2",level:4},{value:".call()",id:"call",level:2},{value:"Description",id:"description-1",level:4},{value:"Example 1",id:"example-1-1",level:4},{value:"Example 2",id:"example-2-1",level:4},{value:".source",id:"source",level:2},{value:"Description",id:"description-2",level:4},{value:"Example",id:"example",level:4}];function d(e){let n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["A ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"4D.Function"})})," object contains a piece of code that can be executed from an object, either using the ",(0,t.jsx)(n.code,{children:"()"})," operator, or using the ",(0,t.jsx)(n.a,{href:"#apply",children:(0,t.jsx)(n.code,{children:"apply()"})})," and ",(0,t.jsx)(n.a,{href:"#call",children:(0,t.jsx)(n.code,{children:"call()"})})," functions. QodlyScript proposes three kinds of ",(0,t.jsx)(n.code,{children:"Function"})," objects:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"native functions"}),", i.e. built-in functions from various 4D classes such as ",(0,t.jsx)(n.code,{children:"collection.sort()"})," or ",(0,t.jsx)(n.code,{children:"file.copyTo()"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"user functions"}),", created in user ",(0,t.jsx)(n.a,{href:"/docs/language/basics/lang-classes",children:"classes"})," using the ",(0,t.jsx)(n.a,{href:"/docs/language/basics/lang-classes#function",children:"Function keyword"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"formula functions"}),", i.e. functions that can execute any formula."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"formula-objects",children:"formula objects"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.a,{href:"/docs/language/commands/formula",children:"formula"})," and ",(0,t.jsx)(n.a,{href:"/docs/language/commands/formulaFromString",children:"formulaFromString"})," commands allow you to create ",(0,t.jsx)(n.strong,{children:"formula functions,"})," i.e. ",(0,t.jsx)(n.code,{children:"4D.Function"})," objects to execute any expression or code expressed as text."]}),"\n",(0,t.jsx)(n.p,{children:"formula objects can be encapsulated in object properties:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-qs",children:" var f : 4D.Function\n f = newObject\n f.comp = formula(1+2)\n"})}),"\n",(0,t.jsxs)(n.p,{children:['This property is an "object function", i.e. a function which is bound to its parent object. To execute a function stored in an object property, use the ',(0,t.jsx)(n.strong,{children:"()"})," operator after the property name, such as:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-qs",children:" f.comp() //returns 3\n"})}),"\n",(0,t.jsx)(n.p,{children:"Syntax with brackets is also supported:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-qs",children:' f["comp"]() //returns 3\n'})}),"\n",(0,t.jsx)(n.p,{children:"Note that, even if it does not have parameters (see below), an object function to be executed must be called with () parenthesis. Calling only the object property will return a new reference to the formula (and will not execute it):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-qs",children:" o = f.comp //returns the formula object in o\n"})}),"\n",(0,t.jsxs)(n.p,{children:["You can also execute a function using the ",(0,t.jsx)(n.a,{href:"#apply",children:(0,t.jsx)(n.code,{children:"apply()"})})," and ",(0,t.jsx)(n.a,{href:"#call",children:(0,t.jsx)(n.code,{children:"call()"})})," functions:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-qs",children:" f.comp.apply() //returns 3\n"})}),"\n",(0,t.jsx)(n.h4,{id:"passing-parameters",children:"Passing parameters"}),"\n",(0,t.jsxs)(n.p,{children:['You can pass parameters to your formulas using sequentially numbered "$" variables: ',(0,t.jsx)(n.strong,{children:"$1"}),", ",(0,t.jsx)(n.strong,{children:"$2"}),", ",(0,t.jsx)(n.strong,{children:"$3"}),", and so on. The numbering of the variables represents the order of the parameters."]}),"\n",(0,t.jsx)(n.p,{children:"For example, you can write:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-qs",children:"\n var f : object\n f = newObject\n f.comp = formula(1+$1)\n f.comp(5) //returns 6\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Or using the ",(0,t.jsx)(n.a,{href:"#call",children:".call()"})," function:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-qs",children:" var f : 4D.Function\n var r : integer\n f = formula($1+$2)\n r = f.call(null,5,5) //r: 10\n r = f.call(null,10,yearOf(currentDate)) //r: 2033\n"})}),"\n",(0,t.jsx)(n.h4,{id:"parameters-to-a-single-method",children:"Parameters to a single method"}),"\n",(0,t.jsx)(n.p,{children:"For more convenience, when the formula is made of a single method, parameters can be omitted in the formula object initialization. They can just be passed when the formula is called. For example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-qs",children:' var f : 4D.Function\n var t : string\n\n f = formula(myMethod)\n  //Writing formula(myMethod($1,$2)) is not necessary\n t = f.call(null,"Hello","World") //returns "Hello World"\n t = f.call() //returns "How are you?"\n\n  //myMethod\n declare (param1 : string, param2 : string)->return : string\n if(countParameters = 2)\n    return = param1+" "+param2\n else\n    return = "How are you?"\n end\n'})}),"\n",(0,t.jsx)(n.p,{children:"Parameters are received within the method, in the order they are specified in the call."}),"\n",(0,t.jsx)(n.h3,{id:"functions-and-properties",children:"Functions and properties"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsx)(n.tr,{children:(0,t.jsx)(n.th,{})})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsx)(n.tr,{children:(0,t.jsxs)(n.td,{children:[(0,t.jsxs)(n.a,{href:"#apply",children:[(0,t.jsx)(n.strong,{children:".apply"}),"() : any",(0,t.jsx)("br",{}),(0,t.jsx)(n.strong,{children:".apply"}),"( ",(0,t.jsx)(n.em,{children:"thisObj"})," : object { , ",(0,t.jsx)(n.em,{children:"formulaParams"})," : collection } ) : any"]}),"\xa0\xa0\xa0\xa0executes the ",(0,t.jsx)(n.code,{children:"formula"})," object to which it is applied and returns the resulting value"]})}),(0,t.jsx)(n.tr,{children:(0,t.jsxs)(n.td,{children:[(0,t.jsxs)(n.a,{href:"#call",children:[(0,t.jsx)(n.strong,{children:".call"}),"() : any",(0,t.jsx)("br",{}),(0,t.jsx)(n.strong,{children:".call"}),"( ",(0,t.jsx)(n.em,{children:"thisObj"})," : object { , ...",(0,t.jsx)(n.em,{children:"params"})," : any } ) : any"]}),"\xa0\xa0\xa0\xa0executes the ",(0,t.jsx)(n.code,{children:"formula"})," object to which it is applied and returns the resulting value"]})}),(0,t.jsx)(n.tr,{children:(0,t.jsxs)(n.td,{children:[(0,t.jsxs)(n.a,{href:"#source",children:[(0,t.jsx)(n.strong,{children:".source"})," : string "]}),"\xa0\xa0\xa0\xa0contains the source expression of the ",(0,t.jsx)(n.code,{children:"formula"})," as text"]})})]})]}),"\n",(0,t.jsx)(n.h2,{id:"apply",children:".apply()"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:".apply"}),"() : any",(0,t.jsx)("br",{}),(0,t.jsx)(n.strong,{children:".apply"}),"( ",(0,t.jsx)(n.em,{children:"thisObj"})," : object { , ",(0,t.jsx)(n.em,{children:"formulaParams"})," : collection } ) : any"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{style:{textAlign:"center"}}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"thisObj"}),(0,t.jsx)(n.td,{children:"object"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"\u2192"}),(0,t.jsxs)(n.td,{children:["Object to be returned by ",(0,t.jsx)(n.code,{children:"this"})," in the formula"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"formulaParams"}),(0,t.jsx)(n.td,{children:"collection"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"\u2192"}),(0,t.jsxs)(n.td,{children:["Collection of values to be passed as $1...$n when ",(0,t.jsx)(n.code,{children:"formula"})," is executed"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Result"}),(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"\u2190"}),(0,t.jsx)(n.td,{children:"Value from formula execution"})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"description",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:".apply()"})," function executes the ",(0,t.jsx)(n.code,{children:"formula"})," object to which it is applied and returns the resulting value. The formula object can be created using the ",(0,t.jsx)(n.code,{children:"formula"})," or ",(0,t.jsx)(n.code,{children:"formulaFromString"})," commands."]}),"\n",(0,t.jsxs)(n.p,{children:["In the ",(0,t.jsx)(n.em,{children:"thisObj"})," parameter, you can pass a reference to the object to be used as ",(0,t.jsx)(n.code,{children:"this"})," within the formula."]}),"\n",(0,t.jsxs)(n.p,{children:["You can also pass a collection to be used as $1...$n parameters in the formula using the optional ",(0,t.jsx)(n.em,{children:"formulaParams"})," parameter."]}),"\n",(0,t.jsxs)(n.p,{children:["Note that ",(0,t.jsx)(n.code,{children:".apply()"})," is similar to ",(0,t.jsx)(n.a,{href:"#call",children:(0,t.jsx)(n.code,{children:".call()"})})," except that parameters are passed as a collection. This can be useful for passing calculated results."]}),"\n",(0,t.jsx)(n.h4,{id:"example-1",children:"Example 1"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-qs",children:" var f : 4D.Function\n f = formula($1+$2+$3)\n\n c = newCollection(10,20,30)\n result = f.apply(null,c) // returns 60\n"})}),"\n",(0,t.jsx)(n.h4,{id:"example-2",children:"Example 2"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-qs",children:' var calc : 4D.Function\n var feta, robot : object\n robot = newObject("name","Robot","price",543,"quantity",2)\n feta = newObject("name","Feta","price",12.5,"quantity",5)\n\n calc = formula(this.total = this.price*this.quantity)\n\n calc.apply(feta) // feta = {name:Feta,price:12.5,quantity:5,total:62.5}\n calc.apply(robot) // robot = {name:Robot,price:543,quantity:2,total:1086}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"call",children:".call()"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:".call"}),"() : any",(0,t.jsx)("br",{}),(0,t.jsx)(n.strong,{children:".call"}),"( ",(0,t.jsx)(n.em,{children:"thisObj"})," : object { , ...",(0,t.jsx)(n.em,{children:"params"})," : any } ) : any"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"thisObj"}),(0,t.jsx)(n.td,{children:"object"}),(0,t.jsx)(n.td,{children:"\u2192"}),(0,t.jsxs)(n.td,{children:["object to be returned by ",(0,t.jsx)(n.code,{children:"this"})," in the formula"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"params"}),(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"\u2192"}),(0,t.jsx)(n.td,{children:"Value(s) to be passed as $1...$n when formula is executed"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Result"}),(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"\u2190"}),(0,t.jsx)(n.td,{children:"Value from formula execution"})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"description-1",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:".call()"})," function executes the ",(0,t.jsx)(n.code,{children:"formula"})," object to which it is applied and returns the resulting value. The formula object can be created using the ",(0,t.jsx)(n.code,{children:"formula"})," or ",(0,t.jsx)(n.code,{children:"formulaFromString"})," commands."]}),"\n",(0,t.jsxs)(n.p,{children:["In the ",(0,t.jsx)(n.em,{children:"thisObj"})," parameter, you can pass a reference to the object to be used as ",(0,t.jsx)(n.code,{children:"this"})," within the formula."]}),"\n",(0,t.jsxs)(n.p,{children:["You can also pass values to be used as ",(0,t.jsx)(n.em,{children:"$1...$n"})," parameters in the formula using the optional ",(0,t.jsx)(n.em,{children:"params"})," parameter(s)."]}),"\n",(0,t.jsxs)(n.p,{children:["Note that ",(0,t.jsx)(n.code,{children:".call()"})," is similar to ",(0,t.jsx)(n.a,{href:"#apply",children:(0,t.jsx)(n.code,{children:".apply()"})})," except that parameters are passed directly."]}),"\n",(0,t.jsx)(n.h4,{id:"example-1-1",children:"Example 1"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-qs",children:' var f : 4D.Function\n var result : string\n f = formula(uppercase($1))\n result = f.call(null,"hello") // returns "HELLO"\n'})}),"\n",(0,t.jsx)(n.h4,{id:"example-2-1",children:"Example 2"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-qs",children:' var f : 4D.Function\n var o : object\n var result : integer\n o = newObject("value",50)\n f = formula(this.value*2)\n result = f.call(o) // returns 100\n'})}),"\n",(0,t.jsx)(n.h2,{id:"source",children:".source"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:".source"})," : string"]}),"\n",(0,t.jsx)(n.h4,{id:"description-2",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:".source"})," property contains the source expression of the ",(0,t.jsx)(n.code,{children:"formula"})," as text."]}),"\n",(0,t.jsxs)(n.p,{children:["This property is ",(0,t.jsx)(n.strong,{children:"read-only"}),"."]}),"\n",(0,t.jsx)(n.h4,{id:"example",children:"Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-qs",children:' var of : 4D.Function\n var tf : string\n of = formula(string(currentTime,HH MM AM PM))\n tf = of.source //"string(currentTime,HH MM AM PM)"\n'})})]})}function h(e={}){let{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},50065:function(e,n,s){s.d(n,{Z:function(){return c},a:function(){return a}});var r=s(67294);let t={},l=r.createContext(t);function a(e){let n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);