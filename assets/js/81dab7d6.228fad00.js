"use strict";(self.webpackChunkqodly=self.webpackChunkqodly||[]).push([[7076],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>h});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),d=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},c=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=d(a),m=r,h=p["".concat(s,".").concat(m)]||p[m]||u[m]||i;return a?n.createElement(h,o(o({ref:t},c),{},{components:a})):n.createElement(h,o({ref:t},c))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:r,o[1]=l;for(var d=2;d<i;d++)o[d]=a[d];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},2678:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var n=a(7462),r=(a(7294),a(3905));const i={id:"events",title:"Events and standard actions"},o=void 0,l={unversionedId:"studio/design-webforms/events/events",id:"studio/design-webforms/events/events",title:"Events and standard actions",description:"Events are usually used as a means of triggering certain behaviors. They are used in conjunction with different actions to create interactions in an application.",source:"@site/docs/studio/design-webforms/events/events.md",sourceDirName:"studio/design-webforms/events",slug:"/studio/design-webforms/events/",permalink:"/docs/studio/design-webforms/events/",draft:!1,editUrl:"https://github.com/docQodly/docs/edit/main/docs/studio/design-webforms/events/events.md",tags:[],version:"current",frontMatter:{id:"events",title:"Events and standard actions"},sidebar:"Development",previous:{title:"Datasources",permalink:"/docs/studio/design-webforms/datasources"},next:{title:"Rendering a webform",permalink:"/docs/studio/rendering"}},s={},d=[{value:"Configuring an event",id:"configuring-an-event",level:2},{value:"Bind a class function to an event",id:"bind-a-class-function-to-an-event",level:3},{value:"Bind a navigation action to an event",id:"bind-a-navigation-action-to-an-event",level:3},{value:"Chaining actions",id:"chaining-actions",level:3},{value:"Event types",id:"event-types",level:2},{value:"User events",id:"user-events",level:3},{value:"Example: Hello User",id:"example-hello-user",level:4},{value:"Example: Search feature using the <code>onChange</code> event",id:"example-search-feature-using-the-onchange-event",level:4},{value:"Datasource events",id:"datasource-events",level:3},{value:"Example - Updating an entity selection",id:"example---updating-an-entity-selection",level:4},{value:"List of datasource events",id:"list-of-datasource-events",level:3},{value:"On Change",id:"on-change",level:3},{value:"Standard actions",id:"standard-actions",level:2},{value:"List of standard actions",id:"list-of-standard-actions",level:3}],c={toc:d};function p(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,n.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Events are usually used as a means of triggering certain behaviors. They are used in conjunction with different actions to create interactions in an application."),(0,r.kt)("p",null,"For example, if the user clicks a button on a webpage, you can choose how to react by calling a function or opening another webpage. Events can also be triggered ",(0,r.kt)("a",{parentName:"p",href:"#datasource-events"},"when a datasource is updated"),". "),(0,r.kt)("p",null,"With 4D Web Studio, events are used to execute code on the 4D web server. No additional Javascript is needed."),(0,r.kt)("h2",{id:"configuring-an-event"},"Configuring an event"),(0,r.kt)("p",null,"You can bind your webform events to different actions such as executing a function or navigating to another webform."),(0,r.kt)("h3",{id:"bind-a-class-function-to-an-event"},"Bind a class function to an event"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Select a component or a datasource. The Contextual panel displays the events that are compatible with the element you selected.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click a ",(0,r.kt)("strong",{parentName:"p"},"Add a Function Event")," to attach the corresponding event to the component or datasource.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Select a function in the list. ")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Add parameters (datasources or values) and point at a local or remote datasource to update:"),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"search",src:a(9070).Z,width:"402",height:"177"})),(0,r.kt)("admonition",{parentName:"li",title:"Tip",type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Passing values as parameters lets you test the behavior of a function without creating a datasource.")))),(0,r.kt)("p",null,"A class function can be mapped to several events, and you can assign several events to the same class function."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"When configuring events,the functions that have namespaces displayed next to them are ",(0,r.kt)("a",{parentName:"p",href:"/docs/studio/design-webforms/datasources/#shared-functions"},"shared functions"),".")),(0,r.kt)("h3",{id:"bind-a-navigation-action-to-an-event"},"Bind a navigation action to an event"),(0,r.kt)("p",null,"Inside your application, you can create navigation between pages or update the contents of a page by binding navigation actions to events."),(0,r.kt)("p",null,"To do this: "),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Select a component or a datasource and select ",(0,r.kt)("strong",{parentName:"li"},"Add a Navigation Event")," in the Contextual panel."),(0,r.kt)("li",{parentName:"ol"},"Select a target webform to navigate to."),(0,r.kt)("li",{parentName:"ol"},"Define where the target webform opens:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"New Tab"),": Opens in a new browser tab "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Current Tab"),": Opens in the current browser tab, replacing the current webform"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Webform Loader"),": Opens in the selected ",(0,r.kt)("a",{parentName:"li",href:"/docs/studio/design-webforms/components#component-list"},"Webform loader")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Webform Loader (Self)"),": Opens in the current ",(0,r.kt)("a",{parentName:"li",href:"/docs/studio/design-webforms/components#component-list"},"Webform loader"))))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"search",src:a(4276).Z,width:"730",height:"273"})),(0,r.kt)("h3",{id:"chaining-actions"},"Chaining actions"),(0,r.kt)("p",null,"You can attach several events to a component or datasource. "),(0,r.kt)("p",null,"Events are executed in their defined order. When an event triggers, its actions are executed sequentially. This means that each action starts only when the previous one has finished executing."),(0,r.kt)("h2",{id:"event-types"},"Event types"),(0,r.kt)("p",null,"Events can be set to trigger when end-users perform certain actions or when datasources are updated."),(0,r.kt)("h3",{id:"user-events"},"User events"),(0,r.kt)("p",null,"You can set events to trigger when end-users perform certain actions, such as clicking a button."),(0,r.kt)("h4",{id:"example-hello-user"},"Example: Hello User"),(0,r.kt)("p",null,'This 5-minute video provides a "Hello User" example. Starting from a simple database, it covers how to enable access to the studio, create a basic interface, and trigger a search to greet the user by their name:'),(0,r.kt)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/GwIdic4OhPQ",title:"YouTube video player",frameborder:"0",allow:"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}),(0,r.kt)("h4",{id:"example-search-feature-using-the-onchange-event"},"Example: Search feature using the ",(0,r.kt)("inlineCode",{parentName:"h4"},"onChange")," event"),(0,r.kt)("p",null,"The objective is to update a list of students displayed in a ",(0,r.kt)("strong",{parentName:"p"},"Matrix")," component according to what the end-user types in an input area."),(0,r.kt)("p",null,"In the image below: "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("strong",{parentName:"li"},"Input")," element is bound to the local datasource ",(0,r.kt)("inlineCode",{parentName:"li"},"search")," (of type Text)"),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("strong",{parentName:"li"},"Matrix")," component displays a list of students based on the ",(0,r.kt)("inlineCode",{parentName:"li"},"students")," datasource, which is an entity selection")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"search",src:a(8941).Z,width:"1501",height:"751"})),(0,r.kt)("p",null,"To display results corresponding to the text typed in the ",(0,r.kt)("strong",{parentName:"p"},"Input")," component, we need a ",(0,r.kt)("inlineCode",{parentName:"p"},"search")," function that performs a query:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-4d"},'exposed Function search($search : Text)->$result : cs.StudentsSelection\n    \n$search:="@"+$search+"@"\n    \n$result:=This.query("firstname = :1 or lastname = :1"; $search)   \n')),(0,r.kt)("p",null,"An ",(0,r.kt)("strong",{parentName:"p"},"onChange")," event calls the ",(0,r.kt)("inlineCode",{parentName:"p"},"search")," function and passes the text typed in the ",(0,r.kt)("strong",{parentName:"p"},"Input")," element as a parameter. This updates the ",(0,r.kt)("inlineCode",{parentName:"p"},"students")," datasource:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"search",src:a(1422).Z,width:"1013",height:"293"})),(0,r.kt)("p",null,"Now everytime the text changes inside the ",(0,r.kt)("strong",{parentName:"p"},"Input")," element, a query is sent and the list of students displayed in the ",(0,r.kt)("strong",{parentName:"p"},"Matrix")," component is updated."),(0,r.kt)("h3",{id:"datasource-events"},"Datasource events"),(0,r.kt)("p",null,"Aside from events triggered by end-user actions, events can trigger automatically when datasources are updated."),(0,r.kt)("p",null,"For a list of datasource events, see ",(0,r.kt)("a",{parentName:"p",href:"#list-of-datasource-events"},"List of available events"),"."),(0,r.kt)("h4",{id:"example---updating-an-entity-selection"},"Example - Updating an entity selection"),(0,r.kt)("p",null,"In the image below: "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The employee ",(0,r.kt)("a",{parentName:"li",href:"components.md#datatable"},"Datatable component")," displays a list of employees, based on an entity selection (the ",(0,r.kt)("em",{parentName:"li"},"employees")," catalog datasource is attached)."),(0,r.kt)("li",{parentName:"ul"},'The "General statistics/Detailed statistics" ',(0,r.kt)("a",{parentName:"li",href:"components.md#radio"},"radio component")," is bound to the ",(0,r.kt)("em",{parentName:"li"},"choice")," webfom datasource. "),(0,r.kt)("li",{parentName:"ul"},'Buttons are bound to standard actions that execute queries on the employee datasource (e.g. "salary < 23000").'),(0,r.kt)("li",{parentName:"ul"},"An ",(0,r.kt)("inlineCode",{parentName:"li"},"onChange")," event is attached to the ",(0,r.kt)("inlineCode",{parentName:"li"},"employees")," datasource and another ",(0,r.kt)("inlineCode",{parentName:"li"},"onChange")," event is attached to the ",(0,r.kt)("inlineCode",{parentName:"li"},"choice")," datasource. Both events call the same function from the ",(0,r.kt)("inlineCode",{parentName:"li"},"EmployeeSelection")," class, named ",(0,r.kt)("em",{parentName:"li"},"statistics"),"."),(0,r.kt)("li",{parentName:"ul"},'For simplicity, the "statistics" scalar datasource (object) is displayed as a ',(0,r.kt)("a",{parentName:"li",href:"components.md#text"},"Text component"),".")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"event-datasource",src:a(1009).Z,width:"424",height:"490"})),(0,r.kt)("p",null,"When the user clicks a button or select a radio button, the ",(0,r.kt)("inlineCode",{parentName:"p"},"employees")," datasource is updated, triggering the ",(0,r.kt)("inlineCode",{parentName:"p"},"onChange")," event. This function takes the value of the ",(0,r.kt)("em",{parentName:"p"},"choice")," datasource as parameter, and returns general or detailed statistics as an object depending on the parameter value.  "),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"event-datasource-event",src:a(8502).Z,width:"826",height:"238"})),(0,r.kt)("p",null,"Here's what you obtain after the button is clicked:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"event-datasource-result",src:a(16).Z,width:"339",height:"384"})),(0,r.kt)("h3",{id:"list-of-datasource-events"},"List of datasource events"),(0,r.kt)("h3",{id:"on-change"},"On Change"),(0,r.kt)("p",null,"An ",(0,r.kt)("inlineCode",{parentName:"p"},"On Change")," event attached a datasource triggers in the following cases:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Trigger"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Datasource"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("ul",null,(0,r.kt)("li",null,"The reference pointed by the datasource changes in the web browser (not on the server)"),(0,r.kt)("li",null,"The entity is ",(0,r.kt)("a",{parentName:"td",href:"https://developer.4d.com/docs/en/API/EntityClass.html#touched"},"touched"))))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Entity attribute"),(0,r.kt)("td",{parentName:"tr",align:null},"The contents of the entity attribute change")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Scalar datasource"),(0,r.kt)("td",{parentName:"tr",align:null},"The contents of the scalar datasource change")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Entity selection datasource"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("li",null,"The reference pointed by the datasource changes in the web browser (not on the server)"),(0,r.kt)("li",null,"An entity is added to the entity selection"))))),(0,r.kt)("h2",{id:"standard-actions"},"Standard actions"),(0,r.kt)("p",null,"You can define standard actions to apply to datasources in response to specific events. Available actions depend on the datasource kind.\nFor example, you can associate the ",(0,r.kt)("strong",{parentName:"p"},"Order By")," action to an entity selection datasource, or the ",(0,r.kt)("strong",{parentName:"p"},"Save")," action to an entity datasource."),(0,r.kt)("p",null,"To attach a standard action to the selected component:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Select an event."),(0,r.kt)("li",{parentName:"ol"},"In the Action area, enter the datasource name."),(0,r.kt)("li",{parentName:"ol"},"Click on the desired standard action icon.")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"datasource-action",src:a(6811).Z,width:"622",height:"265"})),(0,r.kt)("h3",{id:"list-of-standard-actions"},"List of standard actions"),(0,r.kt)("p",null,"The following standard actions are available, depending on the datasource kind:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Datasource kind"),(0,r.kt)("th",{parentName:"tr",align:null},"Action"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Entity"),(0,r.kt)("td",{parentName:"tr",align:null},"New"),(0,r.kt)("td",{parentName:"tr",align:null},"Creates a new entity from the same dataclass")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Save"),(0,r.kt)("td",{parentName:"tr",align:null},"Saves the entity")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Refresh"),(0,r.kt)("td",{parentName:"tr",align:null},"Reloads the entity values from the server")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Remove"),(0,r.kt)("td",{parentName:"tr",align:null},"Deletes the entity")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"First"),(0,r.kt)("td",{parentName:"tr",align:null},"Goes to the first entity of the entity selection. Available if the entity belongs to an entity selection")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Previous"),(0,r.kt)("td",{parentName:"tr",align:null},"Goes to the previous entity in the entity selection. Available if the entity belongs to an entity selection")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Next"),(0,r.kt)("td",{parentName:"tr",align:null},"Goes to the next entity in the entity selection. Available if the entity belongs to an entity selection")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Last"),(0,r.kt)("td",{parentName:"tr",align:null},"Goes to the last entity of the entity selection. Available if the entity belongs to an entity selection")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Entity selection"),(0,r.kt)("td",{parentName:"tr",align:null},"Order By"),(0,r.kt)("td",{parentName:"tr",align:null},"You can enter several attributes to sort and select direction")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Query"),(0,r.kt)("td",{parentName:"tr",align:null},"The query is given as a string and supports the same syntax as an ",(0,r.kt)("a",{parentName:"td",href:"https://developer.4d.com/docs/API/DataClassClass#query"},"ORDA query")," except the use of formula (eval) and the settings object. Placeholders can be given with datasources or data as is")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Refresh"),(0,r.kt)("td",{parentName:"tr",align:null},"Reloads the whole entity selection from the server")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"All"),(0,r.kt)("td",{parentName:"tr",align:null},"Loads all the entities of the same dataclass")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Empty"),(0,r.kt)("td",{parentName:"tr",align:null},"Creates a new, empty selection of the same dataclass")))))}p.isMDXComponent=!0},6811:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/datasource-action-642f6713784e5b25c5d8cd5247748209.png"},8502:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/event-datasource-event-acb5c444a19fdf70ef468cbb87e8ff4b.png"},16:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/event-datasource-result-e2db7ef14d0b44fa80384e6610b99536.png"},1009:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/event-datasource-7b766f73ac5508140d9f145ff0e130da.png"},4276:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/navigation-event-0ff6ec79df48a6440247a7459e37039d.png"},8941:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/search-component-7a4a310f485f3937e4b961f38d0d5cee.png"},1422:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/search-event-b7ad7dd1256ecc0e2f502150cf008222.png"},9070:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/toggle-value-8b564239bd11acf4281f6a71758a30ad.png"}}]);