"use strict";(self.webpackChunkqodly=self.webpackChunkqodly||[]).push([[4373],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>k});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),p=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(o.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=p(n),c=r,k=d["".concat(o,".").concat(c)]||d[c]||m[c]||i;return n?a.createElement(k,l(l({ref:t},u),{},{components:n})):a.createElement(k,l({ref:t},u))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=c;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s[d]="string"==typeof e?e:r,l[1]=s;for(var p=2;p<i;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},12574:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var a=n(87462),r=(n(67294),n(3905));const i={id:"classFunctionsParameters",title:"Function Parameters"},l=void 0,s={unversionedId:"api/classFunctionsParameters",id:"api/classFunctionsParameters",title:"Function Parameters",description:"Overview",source:"@site/docs/api/classFunctionsParameters.md",sourceDirName:"api",slug:"/api/classFunctionsParameters",permalink:"/docs/api/classFunctionsParameters",draft:!1,editUrl:"https://github.com/docQodly/docs/edit/main/docs/api/classFunctionsParameters.md",tags:[],version:"current",frontMatter:{id:"classFunctionsParameters",title:"Function Parameters"},sidebar:"API",previous:{title:"Overview",permalink:"/docs/api/classFunctionsOverview"},next:{title:"Function Calls",permalink:"/docs/api/classfunctionsFunctionCalls"}},o={},p=[{value:"Overview",id:"overview",level:2},{value:"General Rules",id:"general-rules",level:2},{value:"Scalar Value Parameter",id:"scalar-value-parameter",level:2},{value:"POST request",id:"post-request",level:4},{value:"GET request",id:"get-request",level:4},{value:"Example",id:"example",level:3},{value:"POST request",id:"post-request-1",level:4},{value:"GET request",id:"get-request-1",level:4},{value:"Response",id:"response",level:4},{value:"Fallback Behavior",id:"fallback-behavior",level:3},{value:"Entity Parameter",id:"entity-parameter",level:2},{value:"Parameter Specifications",id:"parameter-specifications",level:3},{value:"Example",id:"example-1",level:3},{value:"Fallback Behavior",id:"fallback-behavior-1",level:3},{value:"Entity selection Parameter",id:"entity-selection-parameter",level:2},{value:"Parameter Specifications",id:"parameter-specifications-1",level:3},{value:"Example",id:"example-2",level:3},{value:"Fallback Behavior",id:"fallback-behavior-2",level:3},{value:"GET request examples",id:"get-request-examples",level:2},{value:"Returning a document",id:"returning-a-document",level:3},{value:"Using an entity to download a PDF document",id:"using-an-entity-to-download-a-pdf-document",level:3}],u={toc:p};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("p",null,"You can send parameters to data model functions through the REST API. The parameters are received in the declared parameters of the class functions on the server side."),(0,r.kt)("h2",{id:"general-rules"},"General Rules"),(0,r.kt)("p",null,"The following rules must be followed:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"In functions called through POST requests, parameters must be passed ",(0,r.kt)("strong",{parentName:"p"},"in the body of the POST request"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"In functions called through GET requests, parameters must be passed ",(0,r.kt)("strong",{parentName:"p"},'in the URL with "?$params=" syntax'),". ")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"JSON Format"),": Parameters must be enclosed within a collection (JSON format).")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Supported Data Types"),": All scalar data types supported in JSON collections can be passed as parameters, including strings, numbers, booleans, and dates.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Entities and Entity Selections as parameters"),": Both individual entities and entity selections can be passed as parameters. The JSON object must contain specific attributes (",(0,r.kt)("inlineCode",{parentName:"p"},"__DATACLASS"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"__ENTITY"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"__ENTITIES"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"__DATASET"),") to identify and assign data to the corresponding ORDA objects."))),(0,r.kt)("h2",{id:"scalar-value-parameter"},"Scalar Value Parameter"),(0,r.kt)("p",null,"For scalar value parameters, simply enclose them in a collection in the body of the POST request. For instance, consider a ",(0,r.kt)("inlineCode",{parentName:"p"},"Product")," dataclass with a function ",(0,r.kt)("inlineCode",{parentName:"p"},"calculateDiscount")," that takes numeric parameters:"),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},'All JSON data types are supported, including JSON pointers. Dates can be conveyed as strings adhering to ISO 8601 format (e.g., "2020-08-22T22:00:000Z").')),(0,r.kt)("p",null,"For example, with a  dataclass function ",(0,r.kt)("inlineCode",{parentName:"p"},"getCities()")," receiving text parameters:"),(0,r.kt)("h4",{id:"post-request"},"POST request"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"/rest/City/getCities"),"  "),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Parameters in body:")," ",'["Aguada","Paris"]'),(0,r.kt)("h4",{id:"get-request"},"GET request"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},'/rest/City/getCities?$params=\'["Aguada","Paris"]\''),"  "),(0,r.kt)("h3",{id:"example"},"Example"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Server-side Function Code:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-qs"},"exposed function calculateDiscount(price : number, discountRate : number) : number\n    var discountedPrice : number\n    discountedPrice = price*(1-discountRate)\n    return discountedPrice\n")),(0,r.kt)("h4",{id:"post-request-1"},"POST request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"POST {{ApiEndpoint}}/rest/Product/calculateDiscount\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Body of the request:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},"[100, 0.15]\n")),(0,r.kt)("h4",{id:"get-request-1"},"GET request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"GET {{ApiEndpoint}}/rest/Product/calculateDiscount?$params='[100,0.15]'` \n")),(0,r.kt)("h4",{id:"response"},"Response"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "result": 85\n}\n')),(0,r.kt)("h3",{id:"fallback-behavior"},"Fallback Behavior"),(0,r.kt)("p",null,"If parameters are missing or invalid:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Missing Parameters"),": If any parameters are missing, the function will return an error indicating the missing parameter."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "__ERROR": [\n    {\n      "message": "Missing parameter \'price\'",\n      "componentSignature": "ds",\n      "errCode": 1001\n    }\n  ]\n}\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Invalid Parameters"),": If parameters are of incorrect type or format, the function will return an error specifying the type mismatch or format issue."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "__ERROR": [\n    {\n      "message": "Invalid parameter type for \'discountRate\'. Expected \'number\'.",\n      "componentSignature": "ds",\n      "errCode": 1002\n    }\n  ]\n}\n')))),(0,r.kt)("h2",{id:"entity-parameter"},"Entity Parameter"),(0,r.kt)("p",null,"When passing an entity as a parameter, the entity is referenced on the server through its key (",(0,r.kt)("inlineCode",{parentName:"p"},"__KEY")," property). If the key is omitted, a new entity is created in memory on the server."),(0,r.kt)("p",null,"Additionally, attribute values for the entity can be passed, automatically utilized for the entity on the server."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Modified attribute values for an existing entity prompt automatic execution of the called ORDA data model function on the server. This enables result examination post-business rule application from the client application, facilitating informed decisions regarding entity saving on the server.")),(0,r.kt)("h3",{id:"parameter-specifications"},"Parameter Specifications"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Requirement"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Attributes of the entity"),(0,r.kt)("td",{parentName:"tr",align:null},"mixed"),(0,r.kt)("td",{parentName:"tr",align:null},"Optional"),(0,r.kt)("td",{parentName:"tr",align:null},"Values to modify.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"_","_","DATACLASS"),(0,r.kt)("td",{parentName:"tr",align:null},"String"),(0,r.kt)("td",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates the Dataclass of the entity.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"_","_","ENTITY"),(0,r.kt)("td",{parentName:"tr",align:null},"Boolean"),(0,r.kt)("td",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"True to indicate that the parameter is an entity.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"_","_","KEY"),(0,r.kt)("td",{parentName:"tr",align:null},"Mixed"),(0,r.kt)("td",{parentName:"tr",align:null},"Optional"),(0,r.kt)("td",{parentName:"tr",align:null},"Primary key of the entity. If not provided, a new entity is created on the server with the given attributes. If provided, the entity corresponding to the key is loaded on the server with the given attributes.")))),(0,r.kt)("h3",{id:"example-1"},"Example"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Server-side Function Code:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-qs"},"exposed function updateEmployee(employeeData : object) : boolean\n    var employee : cs.UsersEntity\n    var status : object\n\n    if (not(employeeData.__KEY = null))\n        employee = ds.Employee.get(employeeData.__KEY)\n    else\n        employee = ds.Employee.new()\n    end\n\n    employee.fromObject(employeeData)\n    status = employee.save()\n\n    return status.success\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Request:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"POST {{ApiEndpoint}}/rest/Employee/updateEmployee\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Body of the request:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "__DATACLASS": "Employee",\n  "__ENTITY": true,\n  "__KEY": 1,\n  "firstName": "John",\n  "lastName": "Doe",\n  "salary": 75000\n}\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Response:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "result": true\n}\n')),(0,r.kt)("h3",{id:"fallback-behavior-1"},"Fallback Behavior"),(0,r.kt)("p",null,"If the key or required attributes are missing:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Missing Key"),": If the ",(0,r.kt)("inlineCode",{parentName:"p"},"__KEY")," is missing, a new entity is created with the provided attributes.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Invalid Key"),": If the ",(0,r.kt)("inlineCode",{parentName:"p"},"__KEY")," is invalid or not found, the function will return an error indicating the entity could not be found."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "__ERROR": [\n    {\n      "message": "Entity with key \'1\' not found",\n      "componentSignature": "ds",\n      "errCode": 1003\n    }\n  ]\n}\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Missing Attributes"),": If required attributes are missing, the function will return an error specifying the missing attributes."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "__ERROR": [\n    {\n      "message": "Missing required attribute \'lastName\'",\n      "componentSignature": "ds",\n      "errCode": 1004\n    }\n  ]\n}\n')),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Empty Attribute Values"),": If attribute values are provided but empty or null, the function will return an error specifying the attributes with empty values."))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'Copier le code\n{\n  "__ERROR": [\n    {\n      "message": "Empty or null value provided for attribute \'firstName\'. Please provide a valid value.",\n      "componentSignature": "ds",\n      "errCode": 1011\n    }\n  ]\n}\n')),(0,r.kt)("h2",{id:"entity-selection-parameter"},"Entity selection Parameter"),(0,r.kt)("p",null,"Before passing an entity selection as a parameter, you need to define it using ",(0,r.kt)("inlineCode",{parentName:"p"},"$method=entityset"),"."),(0,r.kt)("h3",{id:"parameter-specifications-1"},"Parameter Specifications"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Requirement"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Attributes of the entity"),(0,r.kt)("td",{parentName:"tr",align:null},"mixed"),(0,r.kt)("td",{parentName:"tr",align:null},"Optional"),(0,r.kt)("td",{parentName:"tr",align:null},"Values to modify.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"_","_","DATASET"),(0,r.kt)("td",{parentName:"tr",align:null},"String"),(0,r.kt)("td",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"entitySetID (ID) of the entity selection")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"_","_","ENTITIES"),(0,r.kt)("td",{parentName:"tr",align:null},"Boolean"),(0,r.kt)("td",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"True to indicate that the parameter is an entity selection.")))),(0,r.kt)("h3",{id:"example-2"},"Example"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Server-side Function Code:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-qs"},"exposed function applyDiscount(productSelection : object, discount : number) : boolean\n    var products : cs.ProductSelection\n    var product : cs.ProductEntity\n\n    products = ds.Product.getEntitySelection(productSelection.__DATASET)\n    forEach (product, products)\n        product.price = product.price*(1-discount/100)\n        product.save()\n    end\n    return true\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Request:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"POST {{ApiEndpoint}}/rest/Product/applyDiscount\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Body of the request:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'[\n  {\n    "__ENTITIES": true,\n    "__DATASET": "9B9C053A111E4A288E9C1E48965FE671"\n  },\n  10\n]\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Response:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "result": true\n}\n')),(0,r.kt)("h3",{id:"fallback-behavior-2"},"Fallback Behavior"),(0,r.kt)("p",null,"If the entity selection or discount is missing or invalid:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Missing Entity Selection"),": If the ",(0,r.kt)("inlineCode",{parentName:"p"},"__DATASET")," is missing, the function will return an error indicating the entity selection parameter is missing."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "__ERROR": [\n    {\n      "message": "Missing parameter \'__DATASET\'",\n      "componentSignature": "ds",\n      "errCode": 1005\n    }\n  ]\n}\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Invalid Entity Selection"),": If the ",(0,r.kt)("inlineCode",{parentName:"p"},"__DATASET")," is invalid or not found, the function will return an error indicating the entity selection could not be found."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "__ERROR": [\n    {\n      "message": "Entity selection with ID \'9B9C053A111E4A288E9C1E48965FE671\' not found",\n      "componentSignature": "ds",\n      "errCode": 1006\n    }\n  ]\n}\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Missing Discount"),": If the discount parameter is missing, the function will use a default discount value."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "result": true,\n  "message": "No discount provided, default discount of 10% applied"\n}\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Invalid Discount"),": If the discount parameter is invalid, the function will return an error specifying the issue."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "__ERROR": [\n    {\n      "message": "Invalid discount value. Expected \'number\', received \'string\'",\n      "componentSignature": "ds",\n      "errCode": 1007\n    }\n  ]\n}\n')))),(0,r.kt)("h2",{id:"get-request-examples"},"GET request examples"),(0,r.kt)("h3",{id:"returning-a-document"},"Returning a document"),(0,r.kt)("p",null,"You want to propose a link to download the user manual for a selected product with several formats available. You write a ",(0,r.kt)("inlineCode",{parentName:"p"},"getUserManual()")," function of the Products dataclass. You return an object of the ",(0,r.kt)("a",{parentName:"p",href:"/docs/language/OutGoingMessageClass"},(0,r.kt)("inlineCode",{parentName:"a"},"OutgoingMessage")," class"),". "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-qs"},'// Product dataclass\nexposed onHTTPGet function getUserManual(productId : integer, type : string) : 4D.OutgoingMessage\n  \nvar vfile : 4D.File\nvar response = 4D.OutgoingMessage.new()\nvar doc = "/RESOURCES/User manuals/product_" + string(productId)\n\nswitch \n  : (type == "pdf")\n    vfile = file(doc+".pdf")\n    response.setBody(vfile.getContent()) // This is binary content \n    response.setHeader("Content-Type", "application/pdf")\n      \n  : (type == "jpeg")\n    vfile = file(doc+".jpeg")\n    response.setBody(vfile.getContent()) // This is binary content \n    response.setHeader("Content-Type", "image/jpeg")\nend \n  \nreturn response\n\n')),(0,r.kt)("p",null,"You can call the function using a request like:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"GET")," ",(0,r.kt)("inlineCode",{parentName:"p"},"{{ApiEndpoint}}/rest/Products/getUserManual?$params='[1,\"pdf\"]'")),(0,r.kt)("h3",{id:"using-an-entity-to-download-a-pdf-document"},"Using an entity to download a PDF document"),(0,r.kt)("p",null,"Same example as above but you want to pass an entity as parameter to the datastore function. "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-qs"},'// Product dataclass\nexposed onHTTPGet function getUserManual(product : cs.ProductEntity) : 4D.OutgoingMessage\n  \n  var vfile : 4D.File\n  var response = 4D.OutgoingMessage.new()\n  \n  vfile = file("/RESOURCES/User manuals/"+product.name+".pdf")\n  response.setBody(vfile.getContent())\n  response.setHeader("Content-Type", "application/pdf")\n  \n  return response\n')),(0,r.kt)("p",null,"You can call the function using this request:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"GET")," ",(0,r.kt)("inlineCode",{parentName:"p"},'{{ApiEndpoint}}/rest/Product/getUserManual?$params=\'[{"__DATACLASS":"Product","__ENTITY":true,"__KEY":41}]\'')))}d.isMDXComponent=!0}}]);