"use strict";(self.webpackChunkqodly=self.webpackChunkqodly||[]).push([["5193"],{58482:function(e,n,i){i.r(n),i.d(n,{metadata:()=>t,contentTitle:()=>l,default:()=>h,assets:()=>o,toc:()=>c,frontMatter:()=>a});var t=JSON.parse('{"id":"studio/roles/example-of-configuration","title":"Example","description":"This section shows a detailed example of roles and privileges configuration for a HealthCare application handling patients and appointments, including sensible data.","source":"@site/docs/studio/roles/example-of-configuration.md","sourceDirName":"studio/roles","slug":"/studio/roles/example-of-configuration","permalink":"/docs/next/studio/roles/example-of-configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/qodly/docs/issues/new?title=Comment%20on%20studio%2Froles%2Fexample-of-configuration.md%20(current)&body=Share%20any%20feedback%20about%20this%20page%20%E2%80%94%20report%20issues%2C%20suggest%20improvements%2C%20or%20tell%20us%20what%E2%80%99s%20helpful.%0A%0AIf%20it%E2%80%99s%20an%20issue%3A%0A-%20What%E2%80%99s%20the%20issue%3F%20(e.g.%2C%20typo%2C%20incorrect%20information%2C%20unclear%20explanation)%0A-%20Where%20is%20it%3F%20(e.g.%2C%20section%20name%2C%20specific%20paragraph%2C%20or%20line)%0A%0AThank%20you%20for%20helping%20us%20improve!%20%F0%9F%9A%80%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20","tags":[],"version":"current","frontMatter":{"id":"example-of-configuration","title":"Example"},"sidebar":"Develop","previous":{"title":"Including Privileges","permalink":"/docs/next/studio/roles/includingPrivileges"},"next":{"title":"Model Editor","permalink":"/docs/next/studio/model/model-editor-interface"}}'),s=i("85893"),r=i("50065");i("47354");let a={id:"example-of-configuration",title:"Example"},l=void 0,o={},c=[{value:"Application overview",id:"application-overview",level:2},{value:"Model",id:"model",level:3},{value:"Users",id:"users",level:3},{value:"Actions",id:"actions",level:3},{value:"Configuration target",id:"configuration-target",level:3},{value:"Configuring registered users",id:"configuring-registered-users",level:2},{value:"Protecting all data",id:"protecting-all-data",level:3},{value:"Creating the viewPatient privilege",id:"creating-the-viewpatient-privilege",level:3},{value:"Creating the viewConfidentialInfo privilege",id:"creating-the-viewconfidentialinfo-privilege",level:3},{value:"Roles",id:"roles",level:3},{value:"Configuring public access",id:"configuring-public-access",level:2},{value:"The final picture",id:"the-final-picture",level:2}];function d(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"This section shows a detailed example of roles and privileges configuration for a HealthCare application handling patients and appointments, including sensible data."}),"\n",(0,s.jsxs)(n.p,{children:["It includes the support of both ",(0,s.jsx)(n.strong,{children:"public"})," and ",(0,s.jsx)(n.strong,{children:"authenticated"})," ",(0,s.jsx)(n.a,{href:"/docs/next/cloud/resourceMonitoring#application-access",children:"application accesses"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"application-overview",children:"Application overview"}),"\n",(0,s.jsx)(n.p,{children:"Here are the main characteristics of the HealthCare application."}),"\n",(0,s.jsx)(n.h3,{id:"model",children:"Model"}),"\n",(0,s.jsx)(n.p,{children:"The data model contains the following dataclasses:"}),"\n",(0,s.jsx)("img",{src:i(15908).Z,style:{borderRadius:"6px",width:"50%"}}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"AppSettings"})," dataclass is used only by the administrator to set up application settings, no external access is ever allowed."]})}),"\n",(0,s.jsx)(n.h3,{id:"users",children:"Users"}),"\n",(0,s.jsx)(n.p,{children:"The following personaes are identified, along with their access:"}),"\n",(0,s.jsx)("img",{src:i(57419).Z,style:{borderRadius:"6px",width:"70%"}}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Mary"})," and ",(0,s.jsx)(n.strong,{children:"Arthur"})," are registered as ",(0,s.jsx)(n.a,{href:"/docs/next/cloud/userAccountManagement#users-page",children:"Qodly users"})," and use the authenticated endpoint. The administrator ",(0,s.jsx)(n.a,{href:"/docs/next/cloud/userAccountManagement#edit-user-details",children:"assigns them a role in the console"}),".\u200B"]}),"\n",(0,s.jsx)("img",{src:i(82450).Z,style:{borderRadius:"6px",width:"70%"}}),"\n",(0,s.jsx)(n.p,{children:"Once a Qodly app user is authentified, they can only run the actions allowed for the assigned role (because the privileges assigned to this role have the permissions to run specific actions on some resources)."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"X"})," will use the public access without any role and will be only able to run actions allowed for the public access.\u200B"]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"The developer is free to implement an authentication for public users and to assign them a role. This case is not covered here.\u200B"})}),"\n",(0,s.jsx)(n.h3,{id:"actions",children:"Actions"}),"\n",(0,s.jsxs)(n.p,{children:["In this example, only the ",(0,s.jsx)(n.strong,{children:"read"})," action is considered, to simplify the story. However, the exposed principles are the same for other actions (create, update...) \u200B"]}),"\n",(0,s.jsx)(n.h3,{id:"configuration-target",children:"Configuration target"}),"\n",(0,s.jsx)(n.p,{children:"We want to configure the following accesses:"}),"\n",(0,s.jsx)("img",{src:i(6882).Z,style:{borderRadius:"6px",width:"70%"}}),"\n",(0,s.jsx)(n.h2,{id:"configuring-registered-users",children:"Configuring registered users"}),"\n",(0,s.jsx)(n.h3,{id:"protecting-all-data",children:"Protecting all data"}),"\n",(0,s.jsxs)(n.p,{children:["By default in new Qodly applications, ",(0,s.jsx)(n.strong,{children:"no permissions"})," are set up, which means that all data are available for any Qodly app registered user (Reminder: public endpoint is disabled by default).\u200B Thus, the initial configuration is:"]}),"\n",(0,s.jsx)("img",{src:i(23331).Z,style:{borderRadius:"6px",width:"80%"}}),"\n",(0,s.jsxs)(n.p,{children:["The first step in activating safety is to ",(0,s.jsx)(n.strong,{children:"protect all data"})," by default. Accesses will then be opened for each resource."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Create a ",(0,s.jsx)(n.strong,{children:"None"})," privilege with a granted ",(0,s.jsx)(n.strong,{children:"Read"})," action on the Datastore\u200B."]}),"\n"]}),"\n",(0,s.jsx)("img",{src:i(67056).Z,style:{borderRadius:"6px",width:"100%"}}),"\n",(0,s.jsxs)(n.p,{children:["By the inheritance principles, the ",(0,s.jsx)(n.strong,{children:"whole datastore"})," is then protected."]}),"\n",(0,s.jsx)("img",{src:i(33978).Z,style:{borderRadius:"6px",width:"80%"}}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:["Do ",(0,s.jsx)(n.strong,{children:"never"})," assign this privilege to any role, so that the whole datastore will always remain protected by default\u200B."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"creating-the-viewpatient-privilege",children:"Creating the viewPatient privilege"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"Doctor"})," and ",(0,s.jsx)(n.em,{children:"Secretary"})," roles can read patient's data."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Create the ",(0,s.jsx)(n.em,{children:"viewPatient"})," privilege with a granted ",(0,s.jsx)(n.strong,{children:"Read"})," action on the ",(0,s.jsx)(n.code,{children:"Patients"})," dataclass.\u200B"]}),"\n"]}),"\n",(0,s.jsx)("img",{src:i(73199).Z,style:{borderRadius:"6px",width:"100%"}}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:["Assign it to the ",(0,s.jsx)(n.em,{children:"Doctor"})," and ",(0,s.jsx)(n.em,{children:"Secretary"})," roles (see ",(0,s.jsx)(n.a,{href:"#roles",children:"roles"})," below).\u200B"]}),"\n"]}),"\n",(0,s.jsx)("img",{src:i(66853).Z,style:{borderRadius:"6px",width:"80%"}}),"\n",(0,s.jsxs)(n.p,{children:["However, this privilege will give access to all patient data to the ",(0,s.jsx)(n.em,{children:"Secretary"})," role, including by default any confidential. You still need to restrict access to this level of information."]}),"\n",(0,s.jsx)(n.h3,{id:"creating-the-viewconfidentialinfo-privilege",children:"Creating the viewConfidentialInfo privilege"}),"\n",(0,s.jsxs)(n.p,{children:["Only the ",(0,s.jsx)(n.em,{children:"Doctor"})," role can view the patient's confidential data (gathered in a ",(0,s.jsx)(n.em,{children:"confidentialInfo"})," attribute)."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Create the ",(0,s.jsx)(n.em,{children:"viewConfidentialInfo"})," privilege with a granted ",(0,s.jsx)(n.strong,{children:"Read"})," action on the ",(0,s.jsx)(n.code,{children:"Patients.confidentialInfo"})," attribute.\u200B"]}),"\n"]}),"\n",(0,s.jsx)("img",{src:i(72608).Z,style:{borderRadius:"6px",width:"100%"}}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:["Assign it to the ",(0,s.jsx)(n.em,{children:"Doctor"})," role (see ",(0,s.jsx)(n.a,{href:"#roles",children:"roles"})," below). This will exclude all other roles). \u200B"]}),"\n"]}),"\n",(0,s.jsx)("img",{src:i(18725).Z,style:{borderRadius:"6px",width:"80%"}}),"\n",(0,s.jsx)(n.h3,{id:"roles",children:"Roles"}),"\n",(0,s.jsx)(n.p,{children:"Here are the role definitions."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Secretary:"}),"\n"]}),"\n",(0,s.jsx)("img",{src:i(21018).Z,style:{borderRadius:"6px",width:"100%"}}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Doctor:"}),"\n"]}),"\n",(0,s.jsx)("img",{src:i(19222).Z,style:{borderRadius:"6px",width:"100%"}}),"\n",(0,s.jsx)(n.h2,{id:"configuring-public-access",children:"Configuring public access"}),"\n",(0,s.jsxs)(n.p,{children:["By default in new Qodly applications, the public access is ",(0,s.jsx)(n.strong,{children:"disabled"}),". The public access is the access granted for public users (like ",(0,s.jsx)(n.strong,{children:"X"}),") without any role."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"/docs/next/cloud/resourceMonitoring#3-public-url-development-environment-only",children:"Activate the Public access explicitely"})," in the console."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Allow the ",(0,s.jsx)(n.em,{children:"guest"})," privilege to read the appointments."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)("img",{src:i(45774).Z,style:{borderRadius:"6px",width:"100%"}}),"\n",(0,s.jsx)("img",{src:i(45786).Z,style:{borderRadius:"6px",width:"80%"}}),"\n",(0,s.jsxs)(n.p,{children:["By default, ",(0,s.jsx)(n.strong,{children:"all users, including public users"})," have the ",(0,s.jsxs)(n.a,{href:"/docs/next/studio/roles/datastorePermissions#introducing-the-guest-privilege",children:[(0,s.jsx)(n.em,{children:"guest"})," privilege"]}),". By simply allowing the ",(0,s.jsx)(n.em,{children:"guest"})," privilege to read appointments, we allow all users, registered and not registered, to read the appointments."]}),"\n",(0,s.jsx)(n.h2,{id:"the-final-picture",children:"The final picture"}),"\n",(0,s.jsx)(n.p,{children:"Here is a complete overview of the roles and privileges for our HealthCare application:"}),"\n",(0,s.jsx)("img",{src:i(68734).Z,style:{borderRadius:"6px",width:"80%"}})]})}function h(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},19222:function(e,n,i){i.d(n,{Z:function(){return t}});let t=i.p+"assets/images/example-config-doctor-99c48e289f0d87d4fab1b0814a394406.png"},67056:function(e,n,i){i.d(n,{Z:function(){return t}});let t=i.p+"assets/images/example-config1-7ec5c504729adc49915f7bdb25a8f444.png"},73199:function(e,n,i){i.d(n,{Z:function(){return t}});let t=i.p+"assets/images/example-config2-1a771d9030658e3e2d94b73bce40ce6b.png"},21018:function(e,n,i){i.d(n,{Z:function(){return t}});let t=i.p+"assets/images/example-config3-ba1fb0ce8fc4de6c6b0c27b659a06f5b.png"},72608:function(e,n,i){i.d(n,{Z:function(){return t}});let t=i.p+"assets/images/example-config4-0dca9b60f19a78377535ef95de542c61.png"},45774:function(e,n,i){i.d(n,{Z:function(){return t}});let t=i.p+"assets/images/example-config5-845cc89090b0796c8127d07c208396a7.png"},68734:function(e,n,i){i.d(n,{Z:function(){return t}});let t=i.p+"assets/images/example-full-7880e4326e716c71441b9afedb728e63.png"},45786:function(e,n,i){i.d(n,{Z:function(){return t}});let t=i.p+"assets/images/example-guest-5ec8860bb2b1bba62cbc5ae5e96d1828.png"},15908:function(e,n,i){i.d(n,{Z:function(){return t}});let t=i.p+"assets/images/example-model-e8d76d6b791ad17b06b01e1393c7cb19.png"},33978:function(e,n,i){i.d(n,{Z:function(){return t}});let t=i.p+"assets/images/example-none-7a7a1f173a561e3d9a8f9867fc5fb020.png"},57419:function(e,n,i){i.d(n,{Z:function(){return t}});let t=i.p+"assets/images/example-personae-f3f37ffb1efb30f93ef365f275dade77.png"},23331:function(e,n,i){i.d(n,{Z:function(){return t}});let t=i.p+"assets/images/example-startup-296e9cfcbfbc2e19499b4ddfc63d62ef.png"},6882:function(e,n,i){i.d(n,{Z:function(){return t}});let t=i.p+"assets/images/example-target-c36a9e3a2872900ff79586efeaa7c162.png"},82450:function(e,n,i){i.d(n,{Z:function(){return t}});let t=i.p+"assets/images/example-users-fecd4e9211826b08a4c113155c468c7d.png"},66853:function(e,n,i){i.d(n,{Z:function(){return t}});let t=i.p+"assets/images/example-viewpatient-a6d085bc3ad836e10701f132837fa99b.png"},18725:function(e,n,i){i.d(n,{Z:function(){return t}});let t=i.p+"assets/images/example-viewsecretinfo-19c749e53baddf9430d9636d6383dd79.png"},47354:function(e,n,i){i.d(n,{ZP:function(){return l}});var t=i(85893),s=i(67294),r=i(67026);let a=e=>{let n="undefined"!=typeof window&&window.matchMedia(e),[i,t]=(0,s.useState)(n.matches);return(0,s.useEffect)(()=>(n.onchange=e=>t(e.matches),()=>n.onchange=null)),i},l={List:function(e){let{children:n,align:i="start",justifyContent:s="start"}=e;return(0,t.jsx)("div",{className:(0,r.Z)("flex flex-col lg:flex-row flex-wrap",{"items-start":"start"===i,"items-center":"center"===i,"items-end":"end"===i},{"justify-start":"start"===s,"justify-center":"center"===s,"justify-end":"end"===s,"justify-between":"between"===s,"justify-around":"around"===s,"justify-evenly":"evenly"===s}),children:n})},Item:function(e){let{children:n,width:i}=e,s=a("(max-width: 1024px)");return(0,t.jsx)("div",{className:(0,r.Z)({"flex-1":!i}),style:s?{}:{width:i},children:n})}}},50065:function(e,n,i){i.d(n,{Z:function(){return l},a:function(){return a}});var t=i(67294);let s={},r=t.createContext(s);function a(e){let n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);