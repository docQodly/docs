"use strict";(self.webpackChunkqodly=self.webpackChunkqodly||[]).push([[5381],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>g});var l=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,l,a=function(e,t){if(null==e)return{};var n,l,a={},o=Object.keys(e);for(l=0;l<o.length;l++)n=o[l],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(l=0;l<o.length;l++)n=o[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=l.createContext({}),s=function(e){var t=l.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=s(e.components);return l.createElement(c.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},d=l.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=s(n),d=a,g=u["".concat(c,".").concat(d)]||u[d]||m[d]||o;return n?l.createElement(g,r(r({ref:t},p),{},{components:n})):l.createElement(g,r({ref:t},p))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i[u]="string"==typeof e?e:a,r[1]=i;for(var s=2;s<o;s++)r[s]=n[s];return l.createElement.apply(null,r)}return l.createElement.apply(null,n)}d.displayName="MDXCreateElement"},86744:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>s});var l=n(87462),a=(n(67294),n(3905));const o={id:"lang-collection",title:"Collection"},r=void 0,i={unversionedId:"language/basics/lang-collection",id:"language/basics/lang-collection",title:"Collection",description:"Collections are ordered lists of values of similar or mixed types (text, number, date, object, boolean, collection, or null).",source:"@site/docs/language/basics/lang-collection.md",sourceDirName:"language/basics",slug:"/language/basics/lang-collection",permalink:"/docs/language/basics/lang-collection",draft:!1,editUrl:"https://github.com/docQodly/docs/edit/main/docs/language/basics/lang-collection.md",tags:[],version:"current",frontMatter:{id:"lang-collection",title:"Collection"},sidebar:"Develop",previous:{title:"Boolean",permalink:"/docs/language/basics/lang-boolean"},next:{title:"Date",permalink:"/docs/language/basics/lang-date"}},c={},s=[{value:"Instantiation",id:"instantiation",level:2},{value:"<code>newCollection</code> command",id:"newcollection-command",level:3},{value:"<code>[]</code> operator",id:"-operator",level:3},{value:"Regular or shared collection",id:"regular-or-shared-collection",level:3},{value:"Collection functions",id:"collection-functions",level:2},{value:"<em>propertyPath</em> parameter",id:"propertypath-parameter",level:3},{value:"Collection operators",id:"collection-operators",level:2}],p={toc:s};function u(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,l.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Collections are ordered lists of values of similar or mixed types (text, number, date, object, boolean, collection, or null)."),(0,a.kt)("p",null,"Collection type variables are managed using ",(0,a.kt)("a",{parentName:"p",href:"/docs/language/basics/lang-object#syntax-basics"},"object notation"),"."),(0,a.kt)("p",null,"To access a collection element, you need to pass the element number inside square brackets:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-qs"},"collectionRef[expression]\n")),(0,a.kt)("p",null,"You can pass any valid expression which returns a positive integer in ",(0,a.kt)("em",{parentName:"p"},"expression"),". Examples:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-qs"}," myCollection[5]  //access to 6th element of the collection\n myCollection[myVar]\n")),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Collection elements are numbered from 0.")),(0,a.kt)("p",null,"You can assign a value to a collection element or get a collection element value:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-qs"},' myCol[10] = "My new element"\n myVar = myCol[0]\n')),(0,a.kt)("p",null,"If you assign an element's index that surpasses the last existing element of the collection, the collection is automatically resized and all new intermediary elements are assigned a null value:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-qs"},' var myCol : collection\n myCol = newCollection("A","B")\n myCol[5] = "Z"\n  //myCol[2]: null\n  //myCol[3]: null\n  //myCol[4]: null\n')),(0,a.kt)("h2",{id:"instantiation"},"Instantiation"),(0,a.kt)("p",null,"Collections must be instantiated, otherwise trying to read or modify their elements will generate a syntax error."),(0,a.kt)("p",null,"Collection instantiation can be done in one of the following ways:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"using the ",(0,a.kt)("inlineCode",{parentName:"li"},"newCollection")," command,"),(0,a.kt)("li",{parentName:"ul"},"using the ",(0,a.kt)("inlineCode",{parentName:"li"},"[]")," operator.")),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Several QodlyScript commands and functions return collections, for example ",(0,a.kt)("a",{parentName:"p",href:"https://doc.4d.com/4dv20/help/command/en/page1799.html"},(0,a.kt)("inlineCode",{parentName:"a"},"lastErrors"))," or ",(0,a.kt)("a",{parentName:"p",href:"/docs/language/CollectionClass#copy"},(0,a.kt)("inlineCode",{parentName:"a"},"collection.copy()")),". In this case, it is not necessary to instantiate explicitely the collection, the QodlyScript language does it for you.")),(0,a.kt)("h3",{id:"newcollection-command"},(0,a.kt)("inlineCode",{parentName:"h3"},"newCollection")," command"),(0,a.kt)("p",null,"The ",(0,a.kt)("a",{parentName:"p",href:"../commands/newCollection"},(0,a.kt)("inlineCode",{parentName:"a"},"newCollection"))," command creates a new empty or prefilled collection and returns its reference."),(0,a.kt)("p",null,"Examples:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-qs"},' var colVar : collection //creation of collection type variable\n  //instantiation of the collection and assignment to the variable\n colVar = newCollection\n\n var colFilled : collection\n  //instantiation and assignment of a prefilled collection\n colFilled = newCollection("a","b",1,42,{})\n\n')),(0,a.kt)("h3",{id:"-operator"},(0,a.kt)("inlineCode",{parentName:"h3"},"[]")," operator"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"[]")," operator allows you to create a ",(0,a.kt)("strong",{parentName:"p"},"collection literal"),". A collection literal is a list of zero or more expressions, each of which represents a collection element, enclosed in square brackets (",(0,a.kt)("inlineCode",{parentName:"p"},"[]"),"). When you create a collection using a collection literal, it is instantiated with the specified values as its elements, and its length is set to the number of arguments specified."),(0,a.kt)("p",null,"Since any element is considered an expression, you can create sub-collections using ",(0,a.kt)("inlineCode",{parentName:"p"},"[]")," in elements. You can also create and reference ",(0,a.kt)("strong",{parentName:"p"},"object literals"),"."),(0,a.kt)("p",null,"If an element is undefined, it will appear as Null in the collection."),(0,a.kt)("p",null,"Examples:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-qs"},'var col1,col2,users : collection\ncol1 = [] //empty collection\ncol2 = [1,2,3,4,5,6] //collection of numbers\n//collection of objects\nusers = [{name: "Alice", \\\n    height: 183, \\\n    eyecolor: "hazel", \\\n    id: col2[5]\\\n    }, \\\n    {name: "Bob", \\\n    height: 172, \\\n    eyecolor: "blue"\\\n    }]\n')),(0,a.kt)("h3",{id:"regular-or-shared-collection"},"Regular or shared collection"),(0,a.kt)("p",null,"You can create two types of collections:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"regular (non-shared) collections, using the ",(0,a.kt)("a",{parentName:"li",href:"../commands/newCollection"},(0,a.kt)("inlineCode",{parentName:"a"},"newCollection"))," command or collection literal syntax (",(0,a.kt)("inlineCode",{parentName:"li"},"[]"),"). These collections can be edited without any specific access control but cannot be shared between processes."),(0,a.kt)("li",{parentName:"ul"},"shared collections, using the ",(0,a.kt)("a",{parentName:"li",href:"../commands/newSharedCollection"},(0,a.kt)("inlineCode",{parentName:"a"},"newSharedCollection"))," command. These collections can be shared between processes, including preemptive threads. Access to these collections is controlled by ",(0,a.kt)("a",{parentName:"li",href:"/docs/language/basics/lang-shared#useend"},(0,a.kt)("inlineCode",{parentName:"a"},"use...end"))," structures.")),(0,a.kt)("p",null,"For more information, refer to the ",(0,a.kt)("a",{parentName:"p",href:"/docs/language/basics/lang-shared"},"Shared objects and collections")," section."),(0,a.kt)("h2",{id:"collection-functions"},"Collection functions"),(0,a.kt)("p",null,"Qodly collection references benefit from dedicated class functions. Collection functions are listed in the ",(0,a.kt)("a",{parentName:"p",href:"/docs/language/CollectionClass"},"Collection")," class."),(0,a.kt)("p",null,"For example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-qs"},"newCol = col.copy() //deep copy of col to newCol\ncol.push(10,100) //add 10 and 100 to the collection\n")),(0,a.kt)("p",null,"Some functions return the original collection after modification, so that you can run the calls in a sequence:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-qs"}," col = newCollection(5,20)\n col2 = col.push(10,100).sort() //col2 == [5,10,20,100]\n")),(0,a.kt)("h3",{id:"propertypath-parameter"},(0,a.kt)("em",{parentName:"h3"},"propertyPath")," parameter"),(0,a.kt)("p",null,"Several functions accept a ",(0,a.kt)("em",{parentName:"p"},"propertyPath")," as parameter. This parameter stands for:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},'either an object property name, for example "lastName"'),(0,a.kt)("li",{parentName:"ul"},'or an object property path, i.e. a hierarchical sequence of sub-properties linked with dot characters, for example "employee.children.firstName".')),(0,a.kt)("h2",{id:"collection-operators"},"Collection operators"),(0,a.kt)("p",null,"You can use comparison operators with ",(0,a.kt)("strong",{parentName:"p"},"collection references"),", which means that you can evaluate if two or more references point to the same instance of a collection."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-qs"},'var c1 = ["a",42] //reference to an instance\nvar c2 = ["a",42] //reference to a different instance\nvar c3 = c1 //reference to the same instance\n')),(0,a.kt)("p",null,"Based upon the code above, the comparison table is:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Operation"),(0,a.kt)("th",{parentName:"tr",align:null},"Syntax"),(0,a.kt)("th",{parentName:"tr",align:null},"Returns"),(0,a.kt)("th",{parentName:"tr",align:null},"Expression"),(0,a.kt)("th",{parentName:"tr",align:null},"Value"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Equality"),(0,a.kt)("td",{parentName:"tr",align:null},"collectionRef == collectionRef"),(0,a.kt)("td",{parentName:"tr",align:null},"boolean"),(0,a.kt)("td",{parentName:"tr",align:null},"$c1 == $c3"),(0,a.kt)("td",{parentName:"tr",align:null},"true")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"c1 == c2"),(0,a.kt)("td",{parentName:"tr",align:null},"false")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Inequality"),(0,a.kt)("td",{parentName:"tr",align:null},"collectionRef # collectionRef"),(0,a.kt)("td",{parentName:"tr",align:null},"boolean"),(0,a.kt)("td",{parentName:"tr",align:null},"$c1 != $c3"),(0,a.kt)("td",{parentName:"tr",align:null},"false")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"c1 != c2"),(0,a.kt)("td",{parentName:"tr",align:null},"true")))))}u.isMDXComponent=!0}}]);