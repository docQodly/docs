"use strict";(self.webpackChunkqodly=self.webpackChunkqodly||[]).push([["70738"],{2050:function(e,n,t){t.r(n),t.d(n,{metadata:()=>s,contentTitle:()=>i,default:()=>h,assets:()=>a,toc:()=>c,frontMatter:()=>d});var s=JSON.parse('{"id":"customComponent/api-reference/webform-editor/v0.2.16","title":"v0.2.16","description":"useDatasourceSub","source":"@site/versioned_docs/version-1.0.0/customComponent/api-reference/webform-editor/v0.2.16.mdx","sourceDirName":"customComponent/api-reference/webform-editor","slug":"/customComponent/api-reference/webform-editor/v0.2.16","permalink":"/docs/1.0.0/customComponent/api-reference/webform-editor/v0.2.16","draft":false,"unlisted":false,"editUrl":"https://github.com/qodly/docs/issues/new?title=Comment%20on%20customComponent%2Fapi-reference%2Fwebform-editor%2Fv0.2.16.mdx%20(1.0.0)&body=Share%20any%20feedback%20about%20this%20page%20%E2%80%94%20report%20issues%2C%20suggest%20improvements%2C%20or%20tell%20us%20what%E2%80%99s%20helpful.%0A%0AIf%20it%E2%80%99s%20an%20issue%3A%0A-%20What%E2%80%99s%20the%20issue%3F%20(e.g.%2C%20typo%2C%20incorrect%20information%2C%20unclear%20explanation)%0A-%20Where%20is%20it%3F%20(e.g.%2C%20section%20name%2C%20specific%20paragraph%2C%20or%20line)%0A%0AThank%20you%20for%20helping%20us%20improve!%20%F0%9F%9A%80%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20","tags":[],"version":"1.0.0","frontMatter":{"id":"v0.2.16","title":"v0.2.16"},"sidebar":"Integrations","previous":{"title":"v0.2.24","permalink":"/docs/1.0.0/customComponent/api-reference/webform-editor/v0.2.24"}}'),o=t("85893"),r=t("50065");let d={id:"v0.2.16",title:"v0.2.16"},i="Hooks",a={},c=[{value:"useDatasourceSub",id:"usedatasourcesub",level:2},{value:"useSources",id:"usesources",level:2},{value:"<em>Parameters</em>",id:"parameters",level:3},{value:"<em>Returns</em>",id:"returns",level:3},{value:"useEnhancedNode",id:"useenhancednode",level:2},{value:"<em>Parameters</em>",id:"parameters-1",level:3},{value:"<em>Returns</em>",id:"returns-1",level:3},{value:"useEnhancedEditor",id:"useenhancededitor",level:2},{value:"<em>Parameters</em>",id:"parameters-2",level:3},{value:"<em>Returns</em>",id:"returns-2",level:3}];function l(e){let n={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...e.components},{TabItem:t,Tabs:s}=n;return!t&&u("TabItem",!0),!s&&u("Tabs",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"hooks",children:"Hooks"})}),"\n",(0,o.jsx)(n.h2,{id:"usedatasourcesub",children:"useDatasourceSub"}),"\n",(0,o.jsx)(n.p,{children:"A hook that subscribes to changes in datasources and performs replacements in the Page based on specified actions."}),"\n",(0,o.jsx)(n.h2,{id:"usesources",children:"useSources"}),"\n",(0,o.jsx)(n.p,{children:"A hook that facilitates managing datasources and current elements associated with a web form. It provides methods for setting, fetching, and listening to changes in datasource values."}),"\n",(0,o.jsx)(n.h3,{id:"parameters",children:(0,o.jsx)(n.em,{children:"Parameters"})}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"param"}),(0,o.jsx)(n.th,{children:"description"})]})}),(0,o.jsx)(n.tbody,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"options"}),(0,o.jsxs)(n.td,{children:[(0,o.jsx)(n.code,{children:"UseSourcesOptions"})," An object allowing configuration of the hook behavior. Includes options such as ",(0,o.jsx)(n.code,{children:"datasourceChange"}),", ",(0,o.jsx)(n.code,{children:"currentElementChange"})," and ",(0,o.jsx)(n.code,{children:"acceptIteratorSel"}),"."]})]})})]}),"\n",(0,o.jsx)(n.h3,{id:"returns",children:(0,o.jsx)(n.em,{children:"Returns"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"{object}"})}),"\n",(0,o.jsx)(n.h2,{id:"useenhancednode",children:"useEnhancedNode"}),"\n",(0,o.jsx)(n.p,{children:"A hook that enhances the functionality of a Craft.js node, providing features for handling data transfer, managing datasources, and styling components."}),"\n",(0,o.jsx)(n.h3,{id:"parameters-1",children:(0,o.jsx)(n.em,{children:"Parameters"})}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"param"}),(0,o.jsx)(n.th,{children:"description"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"collector"}),(0,o.jsxs)(n.td,{children:["(optional) ",(0,o.jsx)(n.code,{children:"(args: Node) => K"})]})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"options"}),(0,o.jsxs)(n.td,{children:["(optional) ",(0,o.jsx)(n.code,{children:"{ stopPropagation?: (data: IDataTransfer) => boolean; onDrop?: (e: any) => void; }"})]})]})]})]}),"\n",(0,o.jsx)(n.h3,{id:"returns-1",children:(0,o.jsx)(n.em,{children:"Returns"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"{UseEnhancedNodeReturnType} - An object containing enhanced node information, connectors, and actions."})}),"\n",(0,o.jsxs)(s,{children:[(0,o.jsxs)(t,{value:"Example 1",children:[(0,o.jsx)(n.p,{children:"Basic usage:"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:"import { useEnhancedNode } from '@ws-ui/webform-editor';\nimport { useState, useEffect } from 'react';\n\nconst ExampleDelayedState = () => {\n  // highlight-next-line\n  const { actions, connectors, linkedNodes } = useEnhancedNode((node) => ({\n    nodes: node.data.nodes,\n    linkedNodes: node.data.linkedNodes,\n    node,\n  }));\n\n  const [delayedState, setDelayedState] = useState(null);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      // Fetch your data, e.g., from an API\n      const result = await fetch('https://api.example.com/data');\n      const data = await result.json();\n\n      setDelayedState(data);\n\n      actions.setDatasourceValue({ key: 'yourDatasourceKey', value: data });\n    };\n\n    fetchData();\n  }, [actions]);\n\n  return (\n    <div ref={connectors.connect}>\n\n      {delayedState && (\n        <div>\n          {JSON.stringify(delayedState)}\n        </div>\n      )}\n    </div>\n  );\n};\n"})})]}),(0,o.jsxs)(t,{value:"Example 2",children:[(0,o.jsx)(n.p,{children:"Handling drop events:"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:"import { useEnhancedNode } from '@ws-ui/webform-editor';\n\nconst DraggableComponent = () => {\n  // highlight-next-line\n const { actions, connectors, linkedNodes } = useEnhancedNode((node) => ({\n   nodes: node.data.nodes,\n    linkedNodes: node.data.linkedNodes,\n    node,\n  }), {\n    onDrop: (event) => {\n      console.log('Dropped:', event);\n    },\n  });\n\n  return (\n    <div\n      ref={connectors.connect}\n      draggable\n      onDragStart={(event) => {\n        event.dataTransfer.setData('text', 'your data here');\n      }}\n    >\n\n      </div>\n      );\n    };\n"})})]})]}),"\n",(0,o.jsxs)(n.admonition,{type:"info",children:[(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"useEnhancedNode"})," function returns an object with the following structure:"]}),(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"id"}),": The ID of the node."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"store"}),": The store associated with the node."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.em,{children:(0,o.jsx)(n.strong,{children:"connectors"})}),": Object containing connectors to interact with the Craft.js editor."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"...collected"}),": Additional data collected by the collector function."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"actions"}),": An object containing methods for manipulating node values, including ",(0,o.jsx)(n.code,{children:"setProp"}),", ",(0,o.jsx)(n.code,{children:"setStyle"}),", ",(0,o.jsx)(n.code,{children:"setDatasource"}),", and ",(0,o.jsx)(n.code,{children:"setIterator"}),"."]}),"\n"]})]}),"\n",(0,o.jsx)(n.h2,{id:"useenhancededitor",children:"useEnhancedEditor"}),"\n",(0,o.jsx)(n.p,{children:"A Hook that provides methods and state information associated with the entire editor."}),"\n",(0,o.jsx)(n.h3,{id:"parameters-2",children:(0,o.jsx)(n.em,{children:"Parameters"})}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"param"}),(0,o.jsx)(n.th,{children:"description"})]})}),(0,o.jsx)(n.tbody,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"collect"}),(0,o.jsx)(n.td,{children:"A function that collects relevant state information from the editor state. The component will re-render when the values returned by this function changes."})]})})]}),"\n",(0,o.jsx)(n.h3,{id:"returns-2",children:(0,o.jsx)(n.em,{children:"Returns"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"{useEditorReturnType<S>}"})}),"\n",(0,o.jsxs)(s,{children:[(0,o.jsxs)(t,{value:"Example 1",children:[(0,o.jsx)(n.p,{children:"Basic usage:"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:"import { useEnhancedEditor } from \"@ws-ui/webform-editor\";\n\nconst BasicUsageExample = () => {\n// highlight-next-line\nconst { isActive, enabled, canvas } = useEnhancedEditor();\n\n // Your component logic based on the editor state\n return (\n   <div>\n    <p>Is Active: {isActive ? 'Yes' : 'No'}</p>\n    <p>Editor Enabled: {enabled ? 'Yes' : 'No'}</p>\n    <p>Canvas Element: {canvas}</p>\n\n   // Additional logic and components based on the editor state\n    </div>\n    );\n  };\n"})})]}),(0,o.jsxs)(t,{value:"Example 2",children:[(0,o.jsx)(n.p,{children:"Basic usage with collector:"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:"import { useEnhancedEditor } from \"@ws-ui/webform-editor\";\n\nconst CollectorUsageExample = () => {\n const collect = (state, query) => ({\n    enabled: state.options.enabled,\n   isActive: query.getEvent('selected').some(),\n });\n // highlight-next-line\n const { isActive, enabled, actions } = useEnhancedEditor(collect);\n\n // Your component logic based on the collected data\n return (\n   <div>\n     <p>Is Active: {isActive ? 'Yes' : 'No'}</p>\n     <p>Editor Enabled: {enabled ? 'Yes' : 'No'}</p>\n\n     // Additional logic and components based on the collected data\n    </div>\n   );\n  };\n"})})]}),(0,o.jsxs)(t,{value:"Example 3",children:[(0,o.jsx)(n.p,{children:"Usage with a custom collector function:"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:"import { useEnhancedEditor } from \"@ws-ui/webform-editor\";\n\nconst CustomUsageExample = ({ id }) => {\n const { hidden, selected, hovered, topLevel } =\n  useEnhancedEditor((state, query) => {\n    const node = state.nodes[id];\n    const nodeActions = query.node(id);\n\n    return {\n      hidden: node?.data.hidden,\n      selected: state.events.selected.has(id),\n       topLevel: node ? nodeActions.isTopLevelCanvas() : false,\n      hovered: state.events.hovered.has(id),\n };\n});\n\n// Your component logic based on the useEnhancedEditor results\nreturn (\n <div>\n    <p>Is Hidden: {hidden ? 'Yes' : 'No'}</p>\n    <p>Is Selected: {selected ? 'Yes' : 'No'}</p>\n    <p>Is Top Level: {topLevel ? 'Yes' : 'No'}</p>\n    <p>Is Hovered: {hovered ? 'Yes' : 'No'}</p>\n</div>\n);\n };\n"})})]})]})]})}function h(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}function u(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},50065:function(e,n,t){t.d(n,{Z:function(){return i},a:function(){return d}});var s=t(67294);let o={},r=s.createContext(o);function d(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:d(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);