"use strict";(self.webpackChunkqodly=self.webpackChunkqodly||[]).push([[7281],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),d=c(n),m=i,h=d["".concat(l,".").concat(m)]||d[m]||u[m]||o;return n?a.createElement(h,s(s({ref:t},p),{},{components:n})):a.createElement(h,s({ref:t},p))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,s=new Array(o);s[0]=m;var r={};for(var l in t)hasOwnProperty.call(t,l)&&(r[l]=t[l]);r.originalType=e,r[d]="string"==typeof e?e:i,s[1]=r;for(var c=2;c<o;c++)s[c]=n[c];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},77219:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>r,toc:()=>c});var a=n(87462),i=(n(67294),n(3905));const o={id:"classFunctionsOverview",title:"Overview"},s=void 0,r={unversionedId:"api/classFunctionsOverview",id:"api/classFunctionsOverview",title:"Overview",description:"Introduction",source:"@site/docs/api/classFunctionsOverview.md",sourceDirName:"api",slug:"/api/classFunctionsOverview",permalink:"/docs/api/classFunctionsOverview",draft:!1,editUrl:"https://github.com/docQodly/docs/edit/main/docs/api/classFunctionsOverview.md",tags:[],version:"current",frontMatter:{id:"classFunctionsOverview",title:"Overview"},sidebar:"API",previous:{title:"$version",permalink:"/docs/api/$version"},next:{title:"Syntax and Class Functions",permalink:"/docs/api/classFunctionsSyntax"}},l={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Exposed Functions",id:"exposed-functions",level:3},{value:"Key Concepts",id:"key-concepts",level:2},{value:"Function Call Syntax",id:"function-call-syntax",level:3},{value:"Handling Non-Exposed Functions",id:"handling-non-exposed-functions",level:3},{value:"REST API Endpoints",id:"rest-api-endpoints",level:2},{value:"Calling Dataclass or Entity Selection Functions",id:"calling-dataclass-or-entity-selection-functions",level:2},{value:"Use Case",id:"use-case",level:2},{value:"Step 1: Defining and Exposing a Function",id:"step-1-defining-and-exposing-a-function",level:3},{value:"Step 2: Calling the Function via REST API",id:"step-2-calling-the-function-via-rest-api",level:3},{value:"Step 3: Request",id:"step-3-request",level:3},{value:"Equivalent Code",id:"equivalent-code",level:4},{value:"Step 4: Sample Response",id:"step-4-sample-response",level:3},{value:"Error Handling",id:"error-handling",level:2}],p={toc:c};function d(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"introduction"},"Introduction"),(0,i.kt)("p",null,"ORDA (Object Relational Data Access) allows developers to interact with the data model of an application through REST APIs. By defining class functions within the ORDA data model, these functions can be exposed and called via REST requests. This allows external systems and clients to leverage the data and business logic encapsulated within an application."),(0,i.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("h3",{id:"exposed-functions"},"Exposed Functions"),(0,i.kt)("p",null,"Only functions marked with the ",(0,i.kt)("inlineCode",{parentName:"p"},"exposed")," keyword can be called from REST requests. This ensures that only intended functions are available for external access."),(0,i.kt)("admonition",{title:"Example: Exposing a Function",type:"tip"},(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-qs"},'exposed function getTest() : string\n    return "test"\n'))),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"For more details, refer to the section on ",(0,i.kt)("a",{parentName:"p",href:"../orda/data-model#exposed-vs-non-exposed-functions"},"Exposed vs. Non-Exposed Functions"),".")),(0,i.kt)("h2",{id:"key-concepts"},"Key Concepts"),(0,i.kt)("h3",{id:"function-call-syntax"},"Function Call Syntax"),(0,i.kt)("p",null,"Functions are called using POST requests on the appropriate ORDA interface without parentheses. The URL and body of the request vary depending on the type of class function being called."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"POST {{ApiEndpoint}}/rest/Product/getProductDetails\n")),(0,i.kt)("h3",{id:"handling-non-exposed-functions"},"Handling Non-Exposed Functions"),(0,i.kt)("p",null,"If a class function is not marked as exposed, it is treated as an attribute rather than a function, resulting in an error response."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "__ERROR": [\n        {\n            "message": "The \\"getProductDetails\\" attribute cannot be found in The \\"Product\\" dataclass",\n            "componentSignature": "dbmg",\n            "errCode": 1500\n        },\n        {\n            "message": "Cannot completely build a list of attributes with \\"getProductDetails\\" for the \\"Product\\" dataclass",\n            "componentSignature": "dbmg",\n            "errCode": 1804\n        }\n    ]\n}\n')),(0,i.kt)("h2",{id:"rest-api-endpoints"},"REST API Endpoints"),(0,i.kt)("p",null,"The ORDA REST API provides several endpoints to call class functions:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Class function"),(0,i.kt)("th",{parentName:"tr",align:null},"Syntax"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"../orda/data-model#datastore"},"Datastore Class")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"/rest/$catalog/DataStoreClassFunction"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"../orda/data-model#dataclass"},"Dataclass Class")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"/rest/{dataClass}/DataClassClassFunction"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"../orda/data-model#entityselection-class"},"EntitySelection Class")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"/rest/{dataClass}/EntitySelectionClassFunction"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"../orda/data-model#entity-class"},"Entity Class")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"/rest/{dataClass}(key)/EntityClassFunction"))))),(0,i.kt)("h2",{id:"calling-dataclass-or-entity-selection-functions"},"Calling Dataclass or Entity Selection Functions"),(0,i.kt)("p",null,"The endpoint ",(0,i.kt)("inlineCode",{parentName:"p"},"{{ApiEndpoint}}/rest/{dataClass}/Function")," is versatile and can be used to call either a dataclass function or an entity selection function. When making a call to this endpoint, the following process is followed to determine which function to execute:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Entity Selection Search"),": The REST API first checks if the function exists in the entity selection class associated with the specified ",(0,i.kt)("inlineCode",{parentName:"p"},"dataClass"),". "),(0,i.kt)("admonition",{parentName:"li",type:"info"},(0,i.kt)("p",{parentName:"admonition"},"An entity selection represents a collection of entities from the dataClass and provides functions that can operate on this collection.")))),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Dataclass Search"),": If the function is not found in the entity selection class, the API then searches for the function in the ",(0,i.kt)("inlineCode",{parentName:"p"},"dataClass")," itself. "),(0,i.kt)("admonition",{parentName:"li",type:"info"},(0,i.kt)("p",{parentName:"admonition"},"The dataclass represents the blueprint of the data entities and can have class functions that provide various operations related to the ",(0,i.kt)("inlineCode",{parentName:"p"},"dataClass"),"."))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Function Execution"),":"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"If the function is found in the entity selection class, it is executed with the context of the entity selection.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"If the function is not found in the entity selection class but exists in the ",(0,i.kt)("inlineCode",{parentName:"p"},"dataClass"),", it is executed with the context of the ",(0,i.kt)("inlineCode",{parentName:"p"},"dataClass"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"If the function exists in both the ",(0,i.kt)("inlineCode",{parentName:"p"},"dataClass")," and the entity selection class, the function in the entity selection class will be executed, and the ",(0,i.kt)("inlineCode",{parentName:"p"},"dataclass")," function will be ignored. This prioritization ensures that operations intended for collections of entities are given precedence over those intended for individual entities or the ",(0,i.kt)("inlineCode",{parentName:"p"},"dataClass")," structure.")))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Fallback Behavior"),": If the function is not found in either the entity selection class or the ",(0,i.kt)("inlineCode",{parentName:"p"},"dataClass"),", an error is returned indicating that the function does not exist."))),(0,i.kt)("h2",{id:"use-case"},"Use Case"),(0,i.kt)("h3",{id:"step-1-defining-and-exposing-a-function"},"Step 1: Defining and Exposing a Function"),(0,i.kt)("p",null,"Consider a scenario where we have a ",(0,i.kt)("inlineCode",{parentName:"p"},"Customer")," dataClass with a function to retrieve customer details based on their ID:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-qs"},'exposed Function getCustomerDetails(customerID : Integer) : cs.CustomerEntity\n    return ds.Customer.query("ID = :1", customerID).first()\n')),(0,i.kt)("p",null,"In this example, the ",(0,i.kt)("inlineCode",{parentName:"p"},"getCustomerDetails")," function is exposed and can be called via the REST API to fetch details of a specific customer."),(0,i.kt)("h3",{id:"step-2-calling-the-function-via-rest-api"},"Step 2: Calling the Function via REST API"),(0,i.kt)("p",null,"To call the ",(0,i.kt)("inlineCode",{parentName:"p"},"getCustomerDetails"),' function for a customer with ID "123", you would use the following request:'),(0,i.kt)("h3",{id:"step-3-request"},"Step 3: Request"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Method:")," POST",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"URL:")," ",(0,i.kt)("inlineCode",{parentName:"p"},"{{ApiEndpoint}}/rest/Customer/getCustomerDetails")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Body:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},"[123]\n")),(0,i.kt)("h4",{id:"equivalent-code"},"Equivalent Code"),(0,i.kt)("p",null,"This call is equivalent to:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-qs"},"customerDetails = ds.Customer.getCustomerDetails(123)\n")),(0,i.kt)("h3",{id:"step-4-sample-response"},"Step 4: Sample Response"),(0,i.kt)("p",null,"The response from the server would look something like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "__entityModel": "Customer",\n    "__DATACLASS": "Customer",\n    "__KEY": "123",\n    "__TIMESTAMP": "2024-05-23T18:11:34.485Z",\n    "__STAMP": 1,\n    "ID": 123,\n    "firstName": "John",\n    "lastName": "Doe",\n    "email": "john.doe@example.com",\n    "orders": {\n        "__deferred": {\n            "uri": "/rest/Order?$filter=customerID=123",\n            "__COUNT": 5\n        }\n    },\n    "profilePicture": null\n}\n')),(0,i.kt)("h2",{id:"error-handling"},"Error Handling"),(0,i.kt)("p",null,"When making REST API calls to ORDA class functions, proper error handling should be implemented to manage cases where the function call fails or returns an unexpected result. "),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"Ensure that your client application can gracefully handle errors and retries as necessary.")))}d.isMDXComponent=!0}}]);